<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Metin ƒ∞nsanla≈ütƒ±rƒ±cƒ± | Humanize.im Alternatifi</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/docx/8.5.0/docx.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 0;
            position: relative;
        }

        header h1 {
            font-size: 3rem;
            background: linear-gradient(90deg, #00d2ff 0%, #3a7bd5 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        header p {
            color: #a0a0a0;
            font-size: 1.1rem;
        }

        .lang-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            padding: 8px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #fff;
            font-size: 0.9rem;
        }

        .lang-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .api-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .api-section h3 {
            margin-bottom: 15px;
            color: #00d2ff;
        }

        .api-input-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .api-input-group input {
            flex: 1;
            min-width: 300px;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            font-size: 0.9rem;
        }

        .api-input-group input::placeholder {
            color: #888;
        }

        .api-input-group button {
            padding: 12px 25px;
            background: linear-gradient(90deg, #00d2ff 0%, #3a7bd5 100%);
            border: none;
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .api-input-group button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 210, 255, 0.3);
        }

        .main-interface {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .main-interface {
                grid-template-columns: 1fr;
            }
        }

        .text-box {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            position: relative;
        }

        .text-box h3 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .text-box h3 .icon {
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        textarea {
            width: 100%;
            min-height: 300px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            color: #fff;
            font-size: 1rem;
            resize: vertical;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
        }

        textarea:focus {
            outline: none;
            border-color: #00d2ff;
        }

        .char-counter {
            position: absolute;
            bottom: 30px;
            right: 30px;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            color: #888;
        }

        .controls {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .controls h3 {
            margin-bottom: 20px;
            color: #00d2ff;
        }

        .style-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .style-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .style-card:hover {
            border-color: #00d2ff;
            transform: translateY(-2px);
        }

        .style-card.active {
            border-color: #00d2ff;
            background: rgba(0, 210, 255, 0.1);
        }

        .style-card h4 {
            margin-bottom: 5px;
            font-size: 0.95rem;
        }

        .style-card p {
            font-size: 0.8rem;
            color: #888;
        }

        .humanize-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(90deg, #00d2ff 0%, #3a7bd5 100%);
            border: none;
            border-radius: 10px;
            color: #fff;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .humanize-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 210, 255, 0.4);
        }

        .humanize-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .humanize-btn .spinner {
            display: none;
            width: 20px;
            height: 20px;
            border: 2px solid #fff;
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
            vertical-align: middle;
        }

        .humanize-btn.loading .spinner {
            display: inline-block;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .output-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .action-btn {
            flex: 1;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .stats-panel {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }

        .stat-card {
            text-align: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #00d2ff;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #888;
        }

        .ai-score {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .score-bar {
            width: 100px;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4444 0%, #ffff44 50%, #44ff44 100%);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .feature-card h4 {
            margin-bottom: 10px;
            color: #00d2ff;
        }

        .feature-card p {
            color: #aaa;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        footer {
            text-align: center;
            padding: 40px 0;
            color: #666;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 40px;
        }

        .download-dropdown {
            position: relative;
            display: inline-block;
        }

        .download-menu {
            display: none;
            position: absolute;
            bottom: 100%;
            left: 0;
            right: 0;
            background: rgba(48, 43, 99, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            margin-bottom: 5px;
            overflow: hidden;
            z-index: 100;
        }

        .download-menu.show {
            display: block;
        }

        .download-option {
            padding: 10px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
            border: none;
            background: transparent;
            color: #fff;
            width: 100%;
            text-align: left;
        }

        .download-option:hover {
            background: rgba(0, 210, 255, 0.3);
        }

        .history-panel {
            position: fixed;
            top: 0;
            right: -350px;
            width: 350px;
            height: 100vh;
            background: rgba(48, 43, 99, 0.98);
            backdrop-filter: blur(10px);
            border-left: 1px solid rgba(255, 255, 255, 0.2);
            transition: right 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
            padding: 20px;
        }

        .history-panel.open {
            right: 0;
        }

        .history-toggle {
            position: fixed;
            top: 50%;
            right: 0;
            transform: translateY(-50%);
            background: rgba(0, 210, 255, 0.9);
            color: #000;
            border: none;
            padding: 15px 10px;
            border-radius: 8px 0 0 8px;
            cursor: pointer;
            font-weight: 600;
            z-index: 999;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            transition: right 0.3s ease;
        }

        .history-toggle.open {
            right: 350px;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .history-header h3 {
            color: #00d2ff;
            margin: 0;
        }

        .clear-history {
            background: rgba(255, 68, 68, 0.3);
            border: 1px solid rgba(255, 68, 68, 0.5);
            color: #fff;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .history-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .history-item:hover {
            border-color: #00d2ff;
            transform: translateX(-5px);
        }

        .history-date {
            font-size: 0.75rem;
            color: #888;
            margin-bottom: 5px;
        }

        .history-style {
            font-size: 0.8rem;
            color: #00d2ff;
            margin-bottom: 5px;
        }

        .history-preview {
            font-size: 0.85rem;
            color: #aaa;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .empty-history {
            text-align: center;
            padding: 40px 20px;
            color: #666;
            font-size: 0.9rem;
        }

        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(0, 210, 255, 0.9);
            color: #000;
            padding: 15px 30px;
            border-radius: 30px;
            font-weight: 600;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .error-toast {
            background: rgba(255, 68, 68, 0.9);
            color: #fff;
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 5px;
            height: 5px;
            background: rgba(0, 210, 255, 0.5);
            border-radius: 50%;
            animation: float 15s infinite;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) rotate(720deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <div class="container">
        <header>
            <button class="lang-toggle" onclick="toggleLanguage()" id="langBtn">
                <span id="langText">EN</span>
            </button>
            <h1 id="title">AI Metin ƒ∞nsanla≈ütƒ±rƒ±cƒ±</h1>
            <p id="subtitle">Yapay zeka metinlerini doƒüal, insan yazƒ±sƒ± gibi d√∂n√º≈üt√ºr√ºn</p>
        </header>

        <div class="api-section">
            <h3 id="apiTitle">üîë API Ayarlarƒ±</h3>
            <div class="api-input-group">
                <input type="password" id="apiKey" placeholder="Groq API Key'inizi girin (gsk_...)" onblur="saveApiKey()">
                <select id="modelSelect" onchange="saveModel()" style="padding: 12px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: #fff;">
                    <option value="llama-3.3-70b-versatile" style="background: #302b63;">Llama 3.3 70B</option>
                    <option value="mixtral-8x7b-32768" style="background: #302b63;">Mixtral 8x7B</option>
                    <option value="gemma-2-9b-it" style="background: #302b63;">Gemma 2 9B</option>
                </select>
                <button onclick="testConnection()" id="testBtn">Baƒülantƒ±yƒ± Test Et</button>
            </div>
            <p style="margin-top: 10px; font-size: 0.85rem; color: #888;" id="apiInfo">
                üí° Groq API key almak i√ßin: <a href="https://console.groq.com" target="_blank" style="color: #00d2ff;">console.groq.com</a> - √úcretsiz 1M token/g√ºn
            </p>
        </div>

        <div class="stats-panel">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="inputTokens">0</div>
                    <div class="stat-label" id="inputLabel">Girdi Token</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="outputTokens">0</div>
                    <div class="stat-label" id="outputLabel">√áƒ±ktƒ± Token</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="aiScore">0%</div>
                    <div class="stat-label" id="scoreLabel">AI Tespit Skoru</div>
                    <div class="ai-score">
                        <div class="score-bar">
                            <div class="score-fill" id="scoreFill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="humanScore">0%</div>
                    <div class="stat-label" id="humanLabel">ƒ∞nsan Benzerliƒüi</div>
                </div>
            </div>
        </div>

        <div class="controls">
            <h3 id="styleTitle">‚ú® D√∂n√º≈üt√ºrme Stili</h3>
            <div class="style-options">
                <div class="style-card active" onclick="selectStyle('natural')" data-style="natural">
                    <h4 id="naturalTitle">üìù Doƒüal</h4>
                    <p id="naturalDesc">G√ºndelik, samimi bir yazƒ± stili</p>
                </div>
                <div class="style-card" onclick="selectStyle('academic')" data-style="academic">
                    <h4 id="academicTitle">üéì Akademik</h4>
                    <p id="academicDesc">Profesyonel, akademik ton</p>
                </div>
                <div class="style-card" onclick="selectStyle('creative')" data-style="creative">
                    <h4 id="creativeTitle">üé® Yaratƒ±cƒ±</h4>
                    <p id="creativeDesc">Edebi, yaratƒ±cƒ± ifadeler</p>
                </div>
                <div class="style-card" onclick="selectStyle('casual')" data-style="casual">
                    <h4 id="casualTitle">üí¨ Rahat</h4>
                    <p id="casualDesc">Arkada≈ü canlƒ±sƒ±, gayri resmi</p>
                </div>
            </div>
        </div>

        <div class="main-interface">
            <div class="text-box">
                <h3>
                    <span class="icon">ü§ñ</span>
                    <span id="inputTitle">AI Metni</span>
                </h3>
                <textarea id="inputText" placeholder="D√∂n√º≈üt√ºrmek istediƒüiniz AI metnini buraya yapƒ±≈ütƒ±rƒ±n..." oninput="updateStats()"></textarea>
                <div class="char-counter">
                    <span id="charCount">0</span> / 4000 <span id="charLabel">karakter</span>
                </div>
            </div>

            <div class="text-box">
                <h3>
                    <span class="icon">üë§</span>
                    <span id="outputTitle">ƒ∞nsanla≈ütƒ±rƒ±lmƒ±≈ü Metin</span>
                </h3>
                <textarea id="outputText" readonly placeholder="D√∂n√º≈üt√ºr√ºlm√º≈ü metin burada g√∂r√ºnecek..."></textarea>
                <div class="output-actions">
                    <button class="action-btn" onclick="copyOutput()" id="copyBtn">
                        üìã Kopyala
                    </button>
                    <div class="download-dropdown" style="flex: 1;">
                        <button class="action-btn" onclick="toggleDownloadMenu()" id="downloadBtn" style="width: 100%;">
                            üíæ ƒ∞ndir ‚ñº
                        </button>
                        <div class="download-menu" id="downloadMenu">
                            <button class="download-option" onclick="downloadAsTXT()">
                                üìÑ TXT - D√ºz Metin
                            </button>
                            <button class="download-option" onclick="downloadAsMD()">
                                üìù MD - Markdown
                            </button>
                            <button class="download-option" onclick="downloadAsPDF()">
                                üìï PDF - PDF Belgesi
                            </button>
                            <button class="download-option" onclick="downloadAsDOCX()">
                                üìò DOCX - Word Belgesi
                            </button>
                        </div>
                    </div>
                    <button class="action-btn" onclick="clearAll()" id="clearBtn">
                        üóëÔ∏è Temizle
                    </button>
                </div>
            </div>
        </div>

        <button class="humanize-btn" id="humanizeBtn" onclick="humanizeText()">
            <span class="spinner"></span>
            <span id="btnText">‚ú® Metni ƒ∞nsanla≈ütƒ±r</span>
        </button>

        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">üîí</div>
                <h4 id="feature1Title">AI Dedekt√∂r Bypass</h4>
                <p id="feature1Desc">GPTZero, Turnitin ve diƒüer AI dedekt√∂rlerinden ka√ßƒ±nƒ±n. Metniniz %100 insan yazƒ±sƒ± gibi g√∂r√ºnecek.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">‚ö°</div>
                <h4 id="feature2Title">Anlƒ±k D√∂n√º≈ü√ºm</h4>
                <p id="feature2Desc">Saniyeler i√ßinde metninizi d√∂n√º≈üt√ºr√ºn. Groq API'nin hƒ±zlƒ± altyapƒ±sƒ± ile bekleme yok.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üåç</div>
                <h4 id="feature3Title">√áoklu Dil</h4>
                <p id="feature3Desc">T√ºrk√ße ve ƒ∞ngilizce desteƒüi. Diƒüer dillerde de √ßalƒ±≈üƒ±r, ancak en iyi sonu√ßlar bu dillerde.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üé≠</div>
                <h4 id="feature4Title">4 Farklƒ± Stil</h4>
                <p id="feature4Desc">Doƒüal, akademik, yaratƒ±cƒ± veya rahat yazƒ± stili se√ßenekleri.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üìä</div>
                <h4 id="feature5Title">AI Skoru</h4>
                <p id="feature5Desc">Ger√ßek zamanlƒ± AI tespit skoru ve insan benzerliƒüi √∂l√ß√ºm√º.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">‚ôæÔ∏è</div>
                <h4 id="feature6Title">Limitsiz Kullanƒ±m</h4>
                <p id="feature6Desc">Kendi API key'iniz ile sƒ±nƒ±rsƒ±z kullanƒ±m. Hi√ßbir kƒ±sƒ±tlama yok.</p>
            </div>
        </div>

        <footer>
            <p id="footerText">AI Metin ƒ∞nsanla≈ütƒ±rƒ±cƒ± &copy; 2025 | Groq API ile g√º√ßlendirilmi≈ütir</p>
        </footer>
    </div>

    <button class="history-toggle" id="historyToggle" onclick="toggleHistoryPanel()">
        <span id="historyToggleText">üìú Ge√ßmi≈ü</span>
    </button>

    <div class="history-panel" id="historyPanel">
        <div class="history-header">
            <h3 id="historyTitle">üìú D√∂n√º≈ü√ºm Ge√ßmi≈üi</h3>
            <button class="clear-history" onclick="clearHistory()" id="clearHistoryBtn">Temizle</button>
        </div>
        <div id="historyList">
            <div class="empty-history" id="emptyHistory">Hen√ºz kayƒ±tlƒ± d√∂n√º≈ü√ºm yok</div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        // Dil paketleri
        const translations = {
            tr: {
                title: "AI Metin ƒ∞nsanla≈ütƒ±rƒ±cƒ±",
                subtitle: "Yapay zeka metinlerini doƒüal, insan yazƒ±sƒ± gibi d√∂n√º≈üt√ºr√ºn",
                apiTitle: "üîë API Ayarlarƒ±",
                apiPlaceholder: "Groq API Key'inizi girin (gsk_...)",
                testBtn: "Baƒülantƒ±yƒ± Test Et",
                apiInfo: "üí° Groq API key almak i√ßin: console.groq.com - √úcretsiz 1M token/g√ºn",
                inputTokens: "Girdi Token",
                outputTokens: "√áƒ±ktƒ± Token",
                scoreLabel: "AI Tespit Skoru",
                humanLabel: "ƒ∞nsan Benzerliƒüi",
                styleTitle: "‚ú® D√∂n√º≈üt√ºrme Stili",
                naturalTitle: "üìù Doƒüal",
                naturalDesc: "G√ºndelik, samimi bir yazƒ± stili",
                academicTitle: "üéì Akademik",
                academicDesc: "Profesyonel, akademik ton",
                creativeTitle: "üé® Yaratƒ±cƒ±",
                creativeDesc: "Edebi, yaratƒ±cƒ± ifadeler",
                casualTitle: "üí¨ Rahat",
                casualDesc: "Arkada≈ü canlƒ±sƒ±, gayri resmi",
                inputTitle: "AI Metni",
                outputTitle: "ƒ∞nsanla≈ütƒ±rƒ±lmƒ±≈ü Metin",
                charLabel: "karakter",
                copyBtn: "üìã Kopyala",
                downloadBtn: "üíæ ƒ∞ndir ‚ñº",
                clearBtn: "üóëÔ∏è Temizle",
                btnText: "‚ú® Metni ƒ∞nsanla≈ütƒ±r",
                feature1Title: "AI Dedekt√∂r Bypass",
                feature1Desc: "GPTZero, Turnitin ve diƒüer AI dedekt√∂rlerinden ka√ßƒ±nƒ±n. Metniniz %100 insan yazƒ±sƒ± gibi g√∂r√ºnecek.",
                feature2Title: "Anlƒ±k D√∂n√º≈ü√ºm",
                feature2Desc: "Saniyeler i√ßinde metninizi d√∂n√º≈üt√ºr√ºn. Groq API'nin hƒ±zlƒ± altyapƒ±sƒ± ile bekleme yok.",
                feature3Title: "√áoklu Dil",
                feature3Desc: "T√ºrk√ße ve ƒ∞ngilizce desteƒüi. Diƒüer dillerde de √ßalƒ±≈üƒ±r, ancak en iyi sonu√ßlar bu dillerde.",
                feature4Title: "4 Farklƒ± Stil",
                feature4Desc: "Doƒüal, akademik, yaratƒ±cƒ± veya rahat yazƒ± stili se√ßenekleri.",
                feature5Title: "AI Skoru",
                feature5Desc: "Ger√ßek zamanlƒ± AI tespit skoru ve insan benzerliƒüi √∂l√ß√ºm√º.",
                feature6Title: "Limitsiz Kullanƒ±m",
                feature6Desc: "Kendi API key'iniz ile sƒ±nƒ±rsƒ±z kullanƒ±m. Hi√ßbir kƒ±sƒ±tlama yok.",
                footerText: "AI Metin ƒ∞nsanla≈ütƒ±rƒ±cƒ± &copy; 2025 | Groq API ile g√º√ßlendirilmi≈ütir",
                inputPlaceholder: "D√∂n√º≈üt√ºrmek istediƒüiniz AI metnini buraya yapƒ±≈ütƒ±rƒ±n...",
                outputPlaceholder: "D√∂n√º≈üt√ºr√ºlm√º≈ü metin burada g√∂r√ºnecek...",
                langBtn: "EN",
                historyToggle: "üìú Ge√ßmi≈ü",
                historyTitle: "üìú D√∂n√º≈ü√ºm Ge√ßmi≈üi",
                clearHistoryBtn: "Temizle",
                emptyHistory: "Hen√ºz kayƒ±tlƒ± d√∂n√º≈ü√ºm yok"
            },
            en: {
                title: "AI Text Humanizer",
                subtitle: "Transform AI-generated text to sound natural and human-like",
                apiTitle: "üîë API Settings",
                apiPlaceholder: "Enter your Groq API Key (gsk_...)",
                testBtn: "Test Connection",
                apiInfo: "üí° Get Groq API key at: console.groq.com - Free 1M tokens/day",
                inputTokens: "Input Tokens",
                outputTokens: "Output Tokens",
                scoreLabel: "AI Detection Score",
                humanLabel: "Human Similarity",
                styleTitle: "‚ú® Conversion Style",
                naturalTitle: "üìù Natural",
                naturalDesc: "Casual, friendly writing style",
                academicTitle: "üéì Academic",
                academicDesc: "Professional, academic tone",
                creativeTitle: "üé® Creative",
                creativeDesc: "Literary, creative expressions",
                casualTitle: "üí¨ Casual",
                casualDesc: "Friendly, informal tone",
                inputTitle: "AI Text",
                outputTitle: "Humanized Text",
                charLabel: "characters",
                copyBtn: "üìã Copy",
                downloadBtn: "üíæ Download ‚ñº",
                clearBtn: "üóëÔ∏è Clear",
                btnText: "‚ú® Humanize Text",
                feature1Title: "AI Detector Bypass",
                feature1Desc: "Evade GPTZero, Turnitin and other AI detectors. Your text will look 100% human-written.",
                feature2Title: "Instant Conversion",
                feature2Desc: "Transform your text in seconds. No waiting with Groq API's fast infrastructure.",
                feature3Title: "Multilingual",
                feature3Desc: "Turkish and English support. Works in other languages too, but best results in these.",
                feature4Title: "4 Different Styles",
                feature4Desc: "Choose from natural, academic, creative, or casual writing styles.",
                feature5Title: "AI Score",
                feature5Desc: "Real-time AI detection score and human similarity measurement.",
                feature6Title: "Unlimited Usage",
                feature6Desc: "Unlimited usage with your own API key. No restrictions whatsoever.",
                footerText: "AI Text Humanizer &copy; 2025 | Powered by Groq API",
                inputPlaceholder: "Paste the AI text you want to transform here...",
                outputPlaceholder: "Humanized text will appear here...",
                langBtn: "TR",
                historyToggle: "üìú History",
                historyTitle: "üìú Conversion History",
                clearHistoryBtn: "Clear",
                emptyHistory: "No saved conversions yet"
            }
        };

        let currentLang = 'tr';
        let selectedStyle = 'natural';

        // Sayfa y√ºklendiƒüinde
        document.addEventListener('DOMContentLoaded', () => {
            loadSettings();
            createParticles();
            updateStats();
        });

        // Dil deƒüi≈ütir
        function toggleLanguage() {
            currentLang = currentLang === 'tr' ? 'en' : 'tr';
            updateLanguage();
            localStorage.setItem('language', currentLang);
        }

        // Dili g√ºncelle
        function updateLanguage() {
            const t = translations[currentLang];
            document.getElementById('title').textContent = t.title;
            document.getElementById('subtitle').textContent = t.subtitle;
            document.getElementById('apiTitle').textContent = t.apiTitle;
            document.getElementById('apiKey').placeholder = t.apiPlaceholder;
            document.getElementById('testBtn').textContent = t.testBtn;
            document.getElementById('apiInfo').innerHTML = t.apiInfo + ' | <a href="https://console.groq.com" target="_blank" style="color: #00d2ff;">console.groq.com</a>';
            document.getElementById('inputLabel').textContent = t.inputTokens;
            document.getElementById('outputLabel').textContent = t.outputTokens;
            document.getElementById('scoreLabel').textContent = t.scoreLabel;
            document.getElementById('humanLabel').textContent = t.humanLabel;
            document.getElementById('styleTitle').textContent = t.styleTitle;
            document.getElementById('naturalTitle').textContent = t.naturalTitle;
            document.getElementById('naturalDesc').textContent = t.naturalDesc;
            document.getElementById('academicTitle').textContent = t.academicTitle;
            document.getElementById('academicDesc').textContent = t.academicDesc;
            document.getElementById('creativeTitle').textContent = t.creativeTitle;
            document.getElementById('creativeDesc').textContent = t.creativeDesc;
            document.getElementById('casualTitle').textContent = t.casualTitle;
            document.getElementById('casualDesc').textContent = t.casualDesc;
            document.getElementById('inputTitle').textContent = t.inputTitle;
            document.getElementById('outputTitle').textContent = t.outputTitle;
            document.getElementById('charLabel').textContent = t.charLabel;
            document.getElementById('copyBtn').textContent = t.copyBtn;
            document.getElementById('downloadBtn').textContent = t.downloadBtn;
            document.getElementById('clearBtn').textContent = t.clearBtn;
            document.getElementById('btnText').textContent = t.btnText;
            document.getElementById('feature1Title').textContent = t.feature1Title;
            document.getElementById('feature1Desc').textContent = t.feature1Desc;
            document.getElementById('feature2Title').textContent = t.feature2Title;
            document.getElementById('feature2Desc').textContent = t.feature2Desc;
            document.getElementById('feature3Title').textContent = t.feature3Title;
            document.getElementById('feature3Desc').textContent = t.feature3Desc;
            document.getElementById('feature4Title').textContent = t.feature4Title;
            document.getElementById('feature4Desc').textContent = t.feature4Desc;
            document.getElementById('feature5Title').textContent = t.feature5Title;
            document.getElementById('feature5Desc').textContent = t.feature5Desc;
            document.getElementById('feature6Title').textContent = t.feature6Title;
            document.getElementById('feature6Desc').textContent = t.feature6Desc;
            document.getElementById('footerText').textContent = t.footerText;
            document.getElementById('inputText').placeholder = t.inputPlaceholder;
            document.getElementById('outputText').placeholder = t.outputPlaceholder;
            document.getElementById('langText').textContent = t.langBtn;
            document.getElementById('historyToggleText').textContent = t.historyToggle;
            document.getElementById('historyTitle').textContent = t.historyTitle;
            document.getElementById('clearHistoryBtn').textContent = t.clearHistoryBtn;
            document.getElementById('emptyHistory').textContent = t.emptyHistory;
        }

        // Ayarlarƒ± kaydet
        function saveApiKey() {
            const apiKey = document.getElementById('apiKey').value;
            if (apiKey) {
                localStorage.setItem('groqApiKey', apiKey);
            }
        }

        function saveModel() {
            const model = document.getElementById('modelSelect').value;
            localStorage.setItem('selectedModel', model);
        }

        // Ayarlarƒ± y√ºkle
        function loadSettings() {
            const savedKey = localStorage.getItem('groqApiKey');
            const savedModel = localStorage.getItem('selectedModel');
            const savedLang = localStorage.getItem('language');
            
            if (savedKey) {
                document.getElementById('apiKey').value = savedKey;
            }
            if (savedModel) {
                document.getElementById('modelSelect').value = savedModel;
            }
            if (savedLang) {
                currentLang = savedLang;
                updateLanguage();
            }
        }

        // Stil se√ßimi
        function selectStyle(style) {
            selectedStyle = style;
            document.querySelectorAll('.style-card').forEach(card => {
                card.classList.remove('active');
            });
            document.querySelector(`[data-style="${style}"]`).classList.add('active');
        }

        // ƒ∞statistikleri g√ºncelle
        function updateStats() {
            const text = document.getElementById('inputText').value;
            const charCount = text.length;
            document.getElementById('charCount').textContent = charCount;
            
            // Yakla≈üƒ±k token sayƒ±sƒ± (kelime bazlƒ± tahmin)
            const estimatedTokens = Math.ceil(charCount / 4);
            document.getElementById('inputTokens').textContent = estimatedTokens;
            
            // AI skoru hesapla (basit heuristic)
            const aiScore = calculateAIScore(text);
            document.getElementById('aiScore').textContent = aiScore + '%';
            document.getElementById('scoreFill').style.width = aiScore + '%';
            document.getElementById('humanScore').textContent = (100 - aiScore) + '%';
        }

        // AI skoru hesapla
        function calculateAIScore(text) {
            if (!text) return 0;
            
            let score = 30; // Temel AI skoru
            
            // AI tipik kalƒ±plarƒ±
            const aiPatterns = [
                /\b(√∂ncelikle|sonu√ß olarak|ba≈üka bir deyi≈üle|daha spesifik olarak)\b/gi,
                /\b(importantly|furthermore|moreover|consequently|therefore)\b/gi,
                /\b(√∂nemli olan ≈üey|dikkate deƒüer bir ≈üekilde)\b/gi,
                /\b(it is important to note|it should be noted)\b/gi,
                /\d+\.\s+[A-Z][a-z]+/g, // Numaralƒ± listeler
                /\b(√∂zellikle|√∂zellikle de|belirgin bir ≈üekilde)\b/gi,
            ];
            
            aiPatterns.forEach(pattern => {
                const matches = (text.match(pattern) || []).length;
                score += matches * 5;
            });
            
            // Tekrarlayan yapƒ±lar
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
            if (sentences.length > 3) {
                const avgLength = text.length / sentences.length;
                if (avgLength > 80 && avgLength < 150) {
                    score += 15; // AI tipik c√ºmle uzunluƒüu
                }
            }
            
            return Math.min(95, Math.max(5, score));
        }

        // Baƒülantƒ± test et
        async function testConnection() {
            const apiKey = document.getElementById('apiKey').value;
            if (!apiKey) {
                showToast(currentLang === 'tr' ? 'L√ºtfen API key girin!' : 'Please enter API key!', true);
                return;
            }

            try {
                const response = await fetch('https://api.groq.com/openai/v1/models', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok) {
                    showToast(currentLang === 'tr' ? '‚úÖ Baƒülantƒ± ba≈üarƒ±lƒ±!' : '‚úÖ Connection successful!');
                    saveApiKey();
                } else {
                    showToast(currentLang === 'tr' ? '‚ùå API key ge√ßersiz!' : '‚ùå Invalid API key!', true);
                }
            } catch (error) {
                showToast(currentLang === 'tr' ? '‚ùå Baƒülantƒ± hatasƒ±!' : '‚ùå Connection error!', true);
            }
        }

        // Metni humanize et
        async function humanizeText() {
            const apiKey = document.getElementById('apiKey').value;
            const inputText = document.getElementById('inputText').value;
            const model = document.getElementById('modelSelect').value;
            const btn = document.getElementById('humanizeBtn');
            
            if (!apiKey) {
                showToast(currentLang === 'tr' ? 'L√ºtfen API key girin!' : 'Please enter API key!', true);
                document.getElementById('apiKey').focus();
                return;
            }

            if (!inputText.trim()) {
                showToast(currentLang === 'tr' ? 'L√ºtfen metin girin!' : 'Please enter text!', true);
                return;
            }

            btn.disabled = true;
            btn.classList.add('loading');
            
            const stylePrompts = {
                tr: {
                    natural: "A≈üaƒüƒ±daki metni tamamen doƒüal, samimi ve insan gibi yazƒ±lmƒ±≈ü gibi yeniden yaz. AI tarafƒ±ndan yazƒ±lmƒ±≈ü gibi durmamasƒ± i√ßin baƒüla√ßlarƒ± deƒüi≈ütir, c√ºmle yapƒ±larƒ±nƒ± varyasyonlu yap, g√ºnl√ºk konu≈üma dilini kullan, tekrarlayan kalƒ±plardan ka√ßƒ±n. Metin akƒ±cƒ± ve okunabilir olsun ama robotik deƒüil:",
                    academic: "A≈üaƒüƒ±daki metni akademik, profesyonel bir √ºslupla yeniden yaz. Daha resmi ama h√¢l√¢ doƒüal bir ton kullan. Akademik terminoloji ekle ancak a≈üƒ±rƒ± teknik olmadan. Metin √∂ƒürenci veya akademisyen tarafƒ±ndan yazƒ±lmƒ±≈ü gibi g√∂r√ºns√ºn, AI tarafƒ±ndan deƒüil:",
                    creative: "A≈üaƒüƒ±daki metni edebi, yaratƒ±cƒ± ve ilgi √ßekici bir √ºslupla yeniden yaz. Metaforlar, benzetmeler ve canlƒ± betimlemeler kullan. Yazarƒ±n ki≈üisel sesi ve tarzƒ± hissedilsin. Hikaye anlatƒ±mƒ± teknikleri kullan ama a≈üƒ±rƒ± abartƒ±lƒ± olmasƒ±n:",
                    casual: "A≈üaƒüƒ±daki metni √ßok rahat, arkada≈ü canlƒ±sƒ± ve g√ºndelik konu≈üma dilinde yeniden yaz. Sanki arkada≈üƒ±na anlatƒ±yormu≈ü gibi, samimi bir ton kullan. Kƒ±saltmalar, argo (uygun ≈üekilde) ve doƒüal konu≈üma kalƒ±plarƒ± kullan. √áok resmi olmasƒ±n, eƒülenceli ve i√ßten olsun:"
                },
                en: {
                    natural: "Rewrite the following text to sound completely natural, friendly, and human-written. Change conjunctions, vary sentence structures, use conversational language, and avoid repetitive AI patterns. Make it flow naturally and readable, but not robotic:",
                    academic: "Rewrite the following text in an academic, professional style. Use formal but still natural tone. Add academic terminology but not overly technical. Make it look like written by a student or academic, not by AI:",
                    creative: "Rewrite the following text in a literary, creative, and engaging style. Use metaphors, similes, and vivid descriptions. Let the writer's personal voice and style be felt. Use storytelling techniques but not overly dramatic:",
                    casual: "Rewrite the following text in a very relaxed, friendly, and casual conversational style. Like you're chatting with a friend, use an intimate tone. Use contractions, colloquialisms (appropriately), and natural speech patterns. Not too formal, fun and genuine:"
                }
            };

            const systemPrompt = currentLang === 'tr' 
                ? "Sen bir metin d√ºzenleme uzmanƒ±sƒ±n. G√∂revin, AI tarafƒ±ndan √ºretilmi≈ü metinleri insanlarƒ±n yazdƒ±ƒüƒ± gibi doƒüal ve akƒ±cƒ± hale getirmek. C√ºmleleri √ße≈üitlendir, tekrarlayan yapƒ±larƒ± kƒ±r, g√ºnl√ºk dil kullan. √ñzg√ºn anlamƒ± koru ama ifade tarzƒ±nƒ± tamamen deƒüi≈ütir."
                : "You are a text editing expert. Your task is to make AI-generated text sound natural and fluent like human writing. Vary sentences, break repetitive structures, use everyday language. Preserve the original meaning but completely change the expression style.";

            try {
                const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: model,
                        messages: [
                            {
                                role: "system",
                                content: systemPrompt
                            },
                            {
                                role: "user",
                                content: stylePrompts[currentLang][selectedStyle] + "\n\n" + inputText
                            }
                        ],
                        temperature: 0.8,
                        max_tokens: 4000
                    })
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.error?.message || 'API error');
                }

                const data = await response.json();
                const humanizedText = data.choices[0].message.content;
                
                document.getElementById('outputText').value = humanizedText;
                
                // √áƒ±ktƒ± token sayƒ±sƒ±nƒ± g√ºncelle
                const outputTokens = data.usage?.completion_tokens || Math.ceil(humanizedText.length / 4);
                document.getElementById('outputTokens').textContent = outputTokens;
                
                // Yeni AI skorunu hesapla
                const newAIScore = calculateAIScore(humanizedText);
                document.getElementById('aiScore').textContent = newAIScore + '%';
                document.getElementById('scoreFill').style.width = newAIScore + '%';
                document.getElementById('humanScore').textContent = (100 - newAIScore) + '%';
                
                showToast(currentLang === 'tr' ? '‚úÖ Metin ba≈üarƒ±yla d√∂n√º≈üt√ºr√ºld√º!' : '‚úÖ Text successfully humanized!');
                
                // Ge√ßmi≈üe kaydet
                saveToHistory(inputText, humanizedText, selectedStyle);
                
            } catch (error) {
                showToast(currentLang === 'tr' ? '‚ùå Hata: ' + error.message : '‚ùå Error: ' + error.message, true);
            } finally {
                btn.disabled = false;
                btn.classList.remove('loading');
            }
        }

        // √áƒ±ktƒ±yƒ± kopyala
        function copyOutput() {
            const outputText = document.getElementById('outputText');
            if (!outputText.value) {
                showToast(currentLang === 'tr' ? 'Kopyalanacak metin yok!' : 'No text to copy!', true);
                return;
            }
            
            outputText.select();
            document.execCommand('copy');
            window.getSelection().removeAllRanges();
            
            showToast(currentLang === 'tr' ? '‚úÖ Metin kopyalandƒ±!' : '‚úÖ Text copied!');
        }

        // Download men√ºs√ºn√º a√ß/kapat
        function toggleDownloadMenu() {
            const menu = document.getElementById('downloadMenu');
            menu.classList.toggle('show');
        }

        // Men√º dƒ±≈üƒ±na tƒ±klandƒ±ƒüƒ±nda kapat
        document.addEventListener('click', function(e) {
            const dropdown = document.querySelector('.download-dropdown');
            if (!dropdown.contains(e.target)) {
                document.getElementById('downloadMenu').classList.remove('show');
            }
        });

        // TXT olarak indir
        function downloadAsTXT() {
            const outputText = document.getElementById('outputText').value;
            if (!outputText) {
                showToast(currentLang === 'tr' ? 'ƒ∞ndirilecek metin yok!' : 'No text to download!', true);
                return;
            }
            
            const blob = new Blob([outputText], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `humanized-${new Date().toISOString().slice(0,10)}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            document.getElementById('downloadMenu').classList.remove('show');
            showToast(currentLang === 'tr' ? '‚úÖ TXT indirildi!' : '‚úÖ TXT downloaded!');
        }

        // Markdown olarak indir
        function downloadAsMD() {
            const outputText = document.getElementById('outputText').value;
            if (!outputText) {
                showToast(currentLang === 'tr' ? 'ƒ∞ndirilecek metin yok!' : 'No text to download!', true);
                return;
            }
            
            const date = new Date().toLocaleString(currentLang === 'tr' ? 'tr-TR' : 'en-US');
            const mdContent = `# ${currentLang === 'tr' ? 'ƒ∞nsanla≈ütƒ±rƒ±lmƒ±≈ü Metin' : 'Humanized Text'}

${currentLang === 'tr' ? '**Olu≈üturulma Tarihi:**' : '**Created Date:**'} ${date}
${currentLang === 'tr' ? '**Stil:**' : '**Style:**'} ${selectedStyle}

---

${outputText}

---

*${currentLang === 'tr' ? 'AI Metin ƒ∞nsanla≈ütƒ±rƒ±cƒ± ile olu≈üturulmu≈ütur' : 'Generated with AI Text Humanizer'}*`;
            
            const blob = new Blob([mdContent], { type: 'text/markdown;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `humanized-${new Date().toISOString().slice(0,10)}.md`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            document.getElementById('downloadMenu').classList.remove('show');
            showToast(currentLang === 'tr' ? '‚úÖ Markdown indirildi!' : '‚úÖ Markdown downloaded!');
        }

        // PDF olarak indir
        function downloadAsPDF() {
            const outputText = document.getElementById('outputText').value;
            if (!outputText) {
                showToast(currentLang === 'tr' ? 'ƒ∞ndirilecek metin yok!' : 'No text to download!', true);
                return;
            }
            
            try {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                doc.setFontSize(16);
                doc.text(currentLang === 'tr' ? 'ƒ∞nsanla≈ütƒ±rƒ±lmƒ±≈ü Metin' : 'Humanized Text', 20, 20);
                
                doc.setFontSize(10);
                const date = new Date().toLocaleString(currentLang === 'tr' ? 'tr-TR' : 'en-US');
                doc.text(`${currentLang === 'tr' ? 'Tarih:' : 'Date:'} ${date}`, 20, 30);
                doc.text(`${currentLang === 'tr' ? 'Stil:' : 'Style:'} ${selectedStyle}`, 20, 37);
                
                doc.setFontSize(11);
                const splitText = doc.splitTextToSize(outputText, 170);
                doc.text(splitText, 20, 50);
                
                doc.save(`humanized-${new Date().toISOString().slice(0,10)}.pdf`);
                document.getElementById('downloadMenu').classList.remove('show');
                showToast(currentLang === 'tr' ? '‚úÖ PDF indirildi!' : '‚úÖ PDF downloaded!');
            } catch (error) {
                showToast(currentLang === 'tr' ? '‚ùå PDF olu≈üturulurken hata!' : '‚ùå Error creating PDF!', true);
            }
        }

        // DOCX olarak indir
        async function downloadAsDOCX() {
            const outputText = document.getElementById('outputText').value;
            if (!outputText) {
                showToast(currentLang === 'tr' ? 'ƒ∞ndirilecek metin yok!' : 'No text to download!', true);
                return;
            }
            
            try {
                const { Document, Packer, Paragraph, TextRun, HeadingLevel, AlignmentType } = window.docx;
                
                const doc = new Document({
                    sections: [{
                        properties: {},
                        children: [
                            new Paragraph({
                                text: currentLang === 'tr' ? 'ƒ∞nsanla≈ütƒ±rƒ±lmƒ±≈ü Metin' : 'Humanized Text',
                                heading: HeadingLevel.TITLE,
                                alignment: AlignmentType.CENTER
                            }),
                            new Paragraph({
                                children: [
                                    new TextRun({
                                        text: `${currentLang === 'tr' ? 'Tarih:' : 'Date:'} ${new Date().toLocaleString(currentLang === 'tr' ? 'tr-TR' : 'en-US')}`,
                                        italics: true
                                    })
                                ]
                            }),
                            new Paragraph({
                                children: [
                                    new TextRun({
                                        text: `${currentLang === 'tr' ? 'Stil:' : 'Style:'} ${selectedStyle}`,
                                        italics: true
                                    })
                                ]
                            }),
                            new Paragraph({
                                text: '',
                                spacing: { after: 200 }
                            }),
                            ...outputText.split('\n').map(line => 
                                new Paragraph({
                                    text: line,
                                    spacing: { after: 120 }
                                })
                            ),
                            new Paragraph({
                                text: '',
                                spacing: { after: 400 }
                            }),
                            new Paragraph({
                                children: [
                                    new TextRun({
                                        text: currentLang === 'tr' ? 'AI Metin ƒ∞nsanla≈ütƒ±rƒ±cƒ± ile olu≈üturulmu≈ütur' : 'Generated with AI Text Humanizer',
                                        italics: true,
                                        size: 18
                                    })
                                ],
                                alignment: AlignmentType.CENTER
                            })
                        ]
                    }]
                });
                
                const blob = await Packer.toBlob(doc);
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `humanized-${new Date().toISOString().slice(0,10)}.docx`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                document.getElementById('downloadMenu').classList.remove('show');
                showToast(currentLang === 'tr' ? '‚úÖ DOCX indirildi!' : '‚úÖ DOCX downloaded!');
            } catch (error) {
                showToast(currentLang === 'tr' ? '‚ùå DOCX olu≈üturulurken hata!' : '‚ùå Error creating DOCX!', true);
            }
        }

        // Ge√ßmi≈ü panelini a√ß/kapat
        function toggleHistoryPanel() {
            const panel = document.getElementById('historyPanel');
            const toggle = document.getElementById('historyToggle');
            panel.classList.toggle('open');
            toggle.classList.toggle('open');
            
            if (panel.classList.contains('open')) {
                loadHistory();
            }
        }

        // Ge√ßmi≈üe kaydet
        function saveToHistory(input, output, style) {
            const history = JSON.parse(localStorage.getItem('conversionHistory') || '[]');
            const styleNames = {
                natural: currentLang === 'tr' ? 'Doƒüal' : 'Natural',
                academic: currentLang === 'tr' ? 'Akademik' : 'Academic',
                creative: currentLang === 'tr' ? 'Yaratƒ±cƒ±' : 'Creative',
                casual: currentLang === 'tr' ? 'Rahat' : 'Casual'
            };
            
            const newItem = {
                id: Date.now(),
                date: new Date().toISOString(),
                input: input.substring(0, 100) + (input.length > 100 ? '...' : ''),
                fullInput: input,
                output: output,
                style: styleNames[style] || style,
                styleKey: style
            };
            
            history.unshift(newItem);
            
            // Sadece son 15 kaydƒ± tut
            if (history.length > 15) {
                history.pop();
            }
            
            localStorage.setItem('conversionHistory', JSON.stringify(history));
            
            // Eƒüer panel a√ßƒ±ksa, listeyi g√ºncelle
            if (document.getElementById('historyPanel').classList.contains('open')) {
                loadHistory();
            }
        }

        // Ge√ßmi≈üi y√ºkle ve g√∂ster
        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('conversionHistory') || '[]');
            const listContainer = document.getElementById('historyList');
            
            if (history.length === 0) {
                listContainer.innerHTML = `<div class="empty-history">${currentLang === 'tr' ? 'Hen√ºz kayƒ±tlƒ± d√∂n√º≈ü√ºm yok' : 'No saved conversions yet'}</div>`;
                return;
            }
            
            listContainer.innerHTML = history.map(item => {
                const date = new Date(item.date);
                const dateStr = date.toLocaleString(currentLang === 'tr' ? 'tr-TR' : 'en-US', {
                    day: '2-digit',
                    month: 'short',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                return `
                    <div class="history-item" onclick="restoreHistory(${item.id})">
                        <div class="history-date">${dateStr}</div>
                        <div class="history-style">${item.style}</div>
                        <div class="history-preview">${item.input}</div>
                    </div>
                `;
            }).join('');
        }

        // Ge√ßmi≈üten geri y√ºkle
        function restoreHistory(id) {
            const history = JSON.parse(localStorage.getItem('conversionHistory') || '[]');
            const item = history.find(h => h.id === id);
            
            if (item) {
                document.getElementById('inputText').value = item.fullInput;
                document.getElementById('outputText').value = item.output;
                
                // Stili de geri y√ºkle
                if (item.styleKey) {
                    selectStyle(item.styleKey);
                }
                
                updateStats();
                toggleHistoryPanel(); // Paneli kapat
                showToast(currentLang === 'tr' ? '‚úÖ Ge√ßmi≈üten y√ºklendi!' : '‚úÖ Loaded from history!');
            }
        }

        // Ge√ßmi≈üi temizle
        function clearHistory() {
            if (confirm(currentLang === 'tr' ? 'T√ºm ge√ßmi≈üi silmek istediƒüinize emin misiniz?' : 'Are you sure you want to clear all history?')) {
                localStorage.removeItem('conversionHistory');
                loadHistory();
                showToast(currentLang === 'tr' ? 'üóëÔ∏è Ge√ßmi≈ü temizlendi!' : 'üóëÔ∏è History cleared!');
            }
        }

        // Temizle
        function clearAll() {
            document.getElementById('inputText').value = '';
            document.getElementById('outputText').value = '';
            updateStats();
            showToast(currentLang === 'tr' ? 'üóëÔ∏è Temizlendi!' : 'üóëÔ∏è Cleared!');
        }

        // Toast bildirim g√∂ster
        function showToast(message, isError = false) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast show' + (isError ? ' error-toast' : '');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Par√ßacƒ±k animasyonu
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particle.style.animationDelay = Math.random() * 10 + 's';
                container.appendChild(particle);
            }
        }
    </script>
</body>
</html>