<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Metin ƒ∞nsanla≈ütƒ±rƒ±cƒ± | Humanize.im Alternatifi</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/docx/8.5.0/docx.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 0;
            position: relative;
        }

        header h1 {
            font-size: 3rem;
            background: linear-gradient(90deg, #00d2ff 0%, #3a7bd5 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        header p {
            color: #a0a0a0;
            font-size: 1.1rem;
        }

        .developer-link {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            padding: 8px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #fff;
            font-size: 0.9rem;
            text-decoration: none;
        }

        .developer-link:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .lang-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            padding: 8px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #fff;
            font-size: 0.9rem;
        }

        .lang-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .api-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .api-section h3 {
            margin-bottom: 15px;
            color: #00d2ff;
        }

        .api-input-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .api-input-group input {
            flex: 1;
            min-width: 300px;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            font-size: 0.9rem;
        }

        .api-input-group input::placeholder {
            color: #888;
        }

        .api-input-group button {
            padding: 12px 25px;
            background: linear-gradient(90deg, #00d2ff 0%, #3a7bd5 100%);
            border: none;
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .api-input-group button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 210, 255, 0.3);
        }

        .main-interface {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .main-interface {
                grid-template-columns: 1fr;
            }
        }

        .text-box {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            position: relative;
        }

        .text-box h3 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .text-box h3 .icon {
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        textarea {
            width: 100%;
            min-height: 300px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            color: #fff;
            font-size: 1rem;
            resize: vertical;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
        }

        textarea:focus {
            outline: none;
            border-color: #00d2ff;
        }

        .char-counter {
            position: absolute;
            bottom: 30px;
            right: 30px;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            color: #888;
        }

        .controls {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .controls h3 {
            margin-bottom: 20px;
            color: #00d2ff;
        }

        .style-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .style-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .style-card:hover {
            border-color: #00d2ff;
            transform: translateY(-2px);
        }

        .style-card.active {
            border-color: #00d2ff;
            background: rgba(0, 210, 255, 0.1);
        }

        .style-card h4 {
            margin-bottom: 5px;
            font-size: 0.95rem;
        }

        .style-card p {
            font-size: 0.8rem;
            color: #888;
        }

        .humanize-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(90deg, #00d2ff 0%, #3a7bd5 100%);
            border: none;
            border-radius: 10px;
            color: #fff;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .humanize-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 210, 255, 0.4);
        }

        .humanize-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .humanize-btn .spinner {
            display: none;
            width: 20px;
            height: 20px;
            border: 2px solid #fff;
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
            vertical-align: middle;
        }

        .humanize-btn.loading .spinner {
            display: inline-block;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .output-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .action-btn {
            flex: 1;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .stats-panel {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }

        .stat-card {
            text-align: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #00d2ff;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #888;
        }

        .ai-score {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .score-bar {
            width: 100px;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4444 0%, #ffff44 50%, #44ff44 100%);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .feature-card h4 {
            margin-bottom: 10px;
            color: #00d2ff;
        }

        .feature-card p {
            color: #aaa;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        footer {
            text-align: center;
            padding: 40px 0;
            color: #666;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 40px;
        }

        .download-dropdown {
            position: relative;
            display: inline-block;
        }

        .download-menu {
            display: none;
            position: absolute;
            bottom: 100%;
            left: 0;
            right: 0;
            background: rgba(48, 43, 99, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            margin-bottom: 5px;
            overflow: hidden;
            z-index: 100;
        }

        .download-menu.show {
            display: block;
        }

        .download-option {
            padding: 10px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
            border: none;
            background: transparent;
            color: #fff;
            width: 100%;
            text-align: left;
        }

        .download-option:hover {
            background: rgba(0, 210, 255, 0.3);
        }

        .history-panel {
            position: fixed;
            top: 0;
            right: -350px;
            width: 350px;
            height: 100vh;
            background: rgba(48, 43, 99, 0.98);
            backdrop-filter: blur(10px);
            border-left: 1px solid rgba(255, 255, 255, 0.2);
            transition: right 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
            padding: 20px;
        }

        .history-panel.open {
            right: 0;
        }

        .history-toggle {
            position: fixed;
            top: 50%;
            right: 0;
            transform: translateY(-50%);
            background: rgba(0, 210, 255, 0.9);
            color: #000;
            border: none;
            padding: 15px 10px;
            border-radius: 8px 0 0 8px;
            cursor: pointer;
            font-weight: 600;
            z-index: 999;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            transition: right 0.3s ease;
        }

        .history-toggle.open {
            right: 350px;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .history-header h3 {
            color: #00d2ff;
            margin: 0;
        }

        .clear-history {
            background: rgba(255, 68, 68, 0.3);
            border: 1px solid rgba(255, 68, 68, 0.5);
            color: #fff;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .history-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .history-item:hover {
            border-color: #00d2ff;
            transform: translateX(-5px);
        }

        .history-date {
            font-size: 0.75rem;
            color: #888;
            margin-bottom: 5px;
        }

        .history-style {
            font-size: 0.8rem;
            color: #00d2ff;
            margin-bottom: 5px;
        }

        .history-preview {
            font-size: 0.85rem;
            color: #aaa;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .empty-history {
            text-align: center;
            padding: 40px 20px;
            color: #666;
            font-size: 0.9rem;
        }

        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(0, 210, 255, 0.9);
            color: #000;
            padding: 15px 30px;
            border-radius: 30px;
            font-weight: 600;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .error-toast {
            background: rgba(255, 68, 68, 0.9);
            color: #fff;
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 5px;
            height: 5px;
            background: rgba(0, 210, 255, 0.5);
            border-radius: 50%;
            animation: float 15s infinite;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) rotate(720deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <div class="container">
        <header>
            <a href="https://github.com/Aybars918" target="_blank" class="developer-link" id="devLink">
                üíª Aybars918
            </a>
            <button class="lang-toggle" onclick="toggleLanguage()" id="langBtn">
                <span id="langText">EN</span>
            </button>
            <h1 id="title">AI Metin ƒ∞nsanla≈ütƒ±rƒ±cƒ±</h1>
            <p id="subtitle">Yapay zeka metinlerini doƒüal, insan yazƒ±sƒ± gibi d√∂n√º≈üt√ºr√ºn</p>
        </header>

        <div class="api-section">
            <h3 id="apiTitle">üîë API Ayarlarƒ±</h3>
            <div class="api-input-group">
                <input type="password" id="apiKey" placeholder="Groq API Key'inizi girin (gsk_...)">
                <select id="modelSelect" style="padding: 12px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: #fff;">
                    <option value="llama-3.3-70b-versatile" style="background: #302b63;">Llama 3.3 70B</option>
                    <option value="mixtral-8x7b-32768" style="background: #302b63;">Mixtral 8x7B</option>
                    <option value="gemma-2-9b-it" style="background: #302b63;">Gemma 2 9B</option>
                </select>
                <button id="testBtn">Baƒülantƒ±yƒ± Test Et</button>
            </div>
            <p style="margin-top: 10px; font-size: 0.85rem; color: #888;" id="apiInfo">
                üí° Groq API key almak i√ßin: <a href="https://console.groq.com" target="_blank" style="color: #00d2ff;">console.groq.com</a> - √úcretsiz 1M token/g√ºn
            </p>
        </div>

        <div class="stats-panel">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="inputTokens">0</div>
                    <div class="stat-label" id="inputLabel">Girdi Token</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="outputTokens">0</div>
                    <div class="stat-label" id="outputLabel">√áƒ±ktƒ± Token</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="aiScore">0%</div>
                    <div class="stat-label" id="scoreLabel">AI Tespit Skoru</div>
                    <div class="ai-score">
                        <div class="score-bar">
                            <div class="score-fill" id="scoreFill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="humanScore">0%</div>
                    <div class="stat-label" id="humanLabel">ƒ∞nsan Benzerliƒüi</div>
                </div>
            </div>
        </div>

        <div class="controls">
            <h3 id="styleTitle">‚ú® D√∂n√º≈üt√ºrme Stili</h3>
            <div class="style-options">
                <div class="style-card active" onclick="selectStyle('natural')" data-style="natural">
                    <h4 id="naturalTitle">üìù Doƒüal</h4>
                    <p id="naturalDesc">G√ºndelik, samimi bir yazƒ± stili</p>
                </div>
                <div class="style-card" onclick="selectStyle('academic')" data-style="academic">
                    <h4 id="academicTitle">üéì Akademik</h4>
                    <p id="academicDesc">Profesyonel, akademik ton</p>
                </div>
                <div class="style-card" onclick="selectStyle('creative')" data-style="creative">
                    <h4 id="creativeTitle">üé® Yaratƒ±cƒ±</h4>
                    <p id="creativeDesc">Edebi, yaratƒ±cƒ± ifadeler</p>
                </div>
                <div class="style-card" onclick="selectStyle('casual')" data-style="casual">
                    <h4 id="casualTitle">üí¨ Rahat</h4>
                    <p id="casualDesc">Arkada≈ü canlƒ±sƒ±, gayri resmi</p>
                </div>
            </div>
        </div>

        <div class="main-interface">
            <div class="text-box">
                <h3>
                    <span class="icon">ü§ñ</span>
                    <span id="inputTitle">AI Metni</span>
                </h3>
                <textarea id="inputText" placeholder="D√∂n√º≈üt√ºrmek istediƒüiniz AI metnini buraya yapƒ±≈ütƒ±rƒ±n..." oninput="updateStats()"></textarea>
                <div class="char-counter">
                    <span id="charCount">0</span> / 4000 <span id="charLabel">karakter</span>
                </div>
            </div>

            <div class="text-box">
                <h3>
                    <span class="icon">üë§</span>
                    <span id="outputTitle">ƒ∞nsanla≈ütƒ±rƒ±lmƒ±≈ü Metin</span>
                </h3>
                <textarea id="outputText" readonly placeholder="D√∂n√º≈üt√ºr√ºlm√º≈ü metin burada g√∂r√ºnecek..."></textarea>
                <div class="output-actions">
                    <button class="action-btn" onclick="copyOutput()" id="copyBtn">
                        üìã Kopyala
                    </button>
                    <div class="download-dropdown" style="flex: 1;">
                        <button class="action-btn" onclick="toggleDownloadMenu()" id="downloadBtn" style="width: 100%;">
                            üíæ ƒ∞ndir ‚ñº
                        </button>
                        <div class="download-menu" id="downloadMenu">
                            <button class="download-option" onclick="downloadAsTXT()">
                                üìÑ TXT - D√ºz Metin
                            </button>
                            <button class="download-option" onclick="downloadAsMD()">
                                üìù MD - Markdown
                            </button>
                            <button class="download-option" onclick="downloadAsPDF()">
                                üìï PDF - PDF Belgesi
                            </button>
                            <button class="download-option" onclick="downloadAsDOCX()">
                                üìò DOCX - Word Belgesi
                            </button>
                        </div>
                    </div>
                    <button class="action-btn" onclick="clearAll()" id="clearBtn">
                        üóëÔ∏è Temizle
                    </button>
                </div>
            </div>
        </div>

        <button class="humanize-btn" id="humanizeBtn" onclick="humanizeText()">
            <span class="spinner"></span>
            <span id="btnText">‚ú® Metni ƒ∞nsanla≈ütƒ±r</span>
        </button>

        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">üîí</div>
                <h4 id="feature1Title">AI Dedekt√∂r Bypass</h4>
                <p id="feature1Desc">GPTZero, Turnitin ve diƒüer AI dedekt√∂rlerinden ka√ßƒ±nƒ±n. Metniniz %100 insan yazƒ±sƒ± gibi g√∂r√ºnecek.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">‚ö°</div>
                <h4 id="feature2Title">Anlƒ±k D√∂n√º≈ü√ºm</h4>
                <p id="feature2Desc">Saniyeler i√ßinde metninizi d√∂n√º≈üt√ºr√ºn. Groq API'nin hƒ±zlƒ± altyapƒ±sƒ± ile bekleme yok.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üåç</div>
                <h4 id="feature3Title">√áoklu Dil</h4>
                <p id="feature3Desc">T√ºrk√ße ve ƒ∞ngilizce desteƒüi. Diƒüer dillerde de √ßalƒ±≈üƒ±r, ancak en iyi sonu√ßlar bu dillerde.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üé≠</div>
                <h4 id="feature4Title">4 Farklƒ± Stil</h4>
                <p id="feature4Desc">Doƒüal, akademik, yaratƒ±cƒ± veya rahat yazƒ± stili se√ßenekleri.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üìä</div>
                <h4 id="feature5Title">AI Skoru</h4>
                <p id="feature5Desc">Ger√ßek zamanlƒ± AI tespit skoru ve insan benzerliƒüi √∂l√ß√ºm√º.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">‚ôæÔ∏è</div>
                <h4 id="feature6Title">Limitsiz Kullanƒ±m</h4>
                <p id="feature6Desc">Kendi API key'iniz ile sƒ±nƒ±rsƒ±z kullanƒ±m. Hi√ßbir kƒ±sƒ±tlama yok.</p>
            </div>
        </div>

        <footer>
            <p id="footerText">AI Metin ƒ∞nsanla≈ütƒ±rƒ±cƒ± &copy; 2025 | Groq API ile g√º√ßlendirilmi≈ütir</p>
            <p style="margin-top: 10px; font-size: 0.85rem; color: #888;">
                <a href="https://github.com/Aybars918" target="_blank" style="color: #00d2ff; text-decoration: none;">
                    üíª Created by Aybars918 on GitHub
                </a>
            </p>
        </footer>
    </div>

    <button class="history-toggle" id="historyToggle" onclick="toggleHistoryPanel()">
        <span id="historyToggleText">üìú Ge√ßmi≈ü</span>
    </button>

    <div class="history-panel" id="historyPanel">
        <div class="history-header">
            <h3 id="historyTitle">üìú D√∂n√º≈ü√ºm Ge√ßmi≈üi</h3>
            <button class="clear-history" onclick="clearHistory()" id="clearHistoryBtn">Temizle</button>
        </div>
        <div id="historyList">
            <div class="empty-history" id="emptyHistory">Hen√ºz kayƒ±tlƒ± d√∂n√º≈ü√ºm yok</div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        // Dil paketleri
        const translations = {
            tr: {
                title: "AI Metin ƒ∞nsanla≈ütƒ±rƒ±cƒ±",
                subtitle: "Yapay zeka metinlerini doƒüal, insan yazƒ±sƒ± gibi d√∂n√º≈üt√ºr√ºn",
                apiTitle: "üîë API Ayarlarƒ±",
                apiPlaceholder: "Groq API Key'inizi girin (gsk_...)",
                testBtn: "Baƒülantƒ±yƒ± Test Et",
                apiInfo: "üí° Groq API key almak i√ßin: console.groq.com - √úcretsiz 1M token/g√ºn",
                inputTokens: "Girdi Token",
                outputTokens: "√áƒ±ktƒ± Token",
                scoreLabel: "AI Tespit Skoru",
                humanLabel: "ƒ∞nsan Benzerliƒüi",
                styleTitle: "‚ú® D√∂n√º≈üt√ºrme Stili",
                naturalTitle: "üìù Doƒüal",
                naturalDesc: "G√ºndelik, samimi bir yazƒ± stili",
                academicTitle: "üéì Akademik",
                academicDesc: "Profesyonel, akademik ton",
                creativeTitle: "üé® Yaratƒ±cƒ±",
                creativeDesc: "Edebi, yaratƒ±cƒ± ifadeler",
                casualTitle: "üí¨ Rahat",
                casualDesc: "Arkada≈ü canlƒ±sƒ±, gayri resmi",
                inputTitle: "AI Metni",
                outputTitle: "ƒ∞nsanla≈ütƒ±rƒ±lmƒ±≈ü Metin",
                charLabel: "karakter",
                copyBtn: "üìã Kopyala",
                downloadBtn: "üíæ ƒ∞ndir ‚ñº",
                clearBtn: "üóëÔ∏è Temizle",
                btnText: "‚ú® Metni ƒ∞nsanla≈ütƒ±r",
                feature1Title: "AI Dedekt√∂r Bypass",
                feature1Desc: "GPTZero, Turnitin ve diƒüer AI dedekt√∂rlerinden ka√ßƒ±nƒ±n. Metniniz %100 insan yazƒ±sƒ± gibi g√∂r√ºnecek.",
                feature2Title: "Anlƒ±k D√∂n√º≈ü√ºm",
                feature2Desc: "Saniyeler i√ßinde metninizi d√∂n√º≈üt√ºr√ºn. Groq API'nin hƒ±zlƒ± altyapƒ±sƒ± ile bekleme yok.",
                feature3Title: "√áoklu Dil",
                feature3Desc: "T√ºrk√ße ve ƒ∞ngilizce desteƒüi. Diƒüer dillerde de √ßalƒ±≈üƒ±r, ancak en iyi sonu√ßlar bu dillerde.",
                feature4Title: "4 Farklƒ± Stil",
                feature4Desc: "Doƒüal, akademik, yaratƒ±cƒ± veya rahat yazƒ± stili se√ßenekleri.",
                feature5Title: "AI Skoru",
                feature5Desc: "Ger√ßek zamanlƒ± AI tespit skoru ve insan benzerliƒüi √∂l√ß√ºm√º.",
                feature6Title: "Limitsiz Kullanƒ±m",
                feature6Desc: "Kendi API key'iniz ile sƒ±nƒ±rsƒ±z kullanƒ±m. Hi√ßbir kƒ±sƒ±tlama yok.",
                footerText: "AI Metin ƒ∞nsanla≈ütƒ±rƒ±cƒ± &copy; 2025 | Groq API ile g√º√ßlendirilmi≈ütir",
                inputPlaceholder: "D√∂n√º≈üt√ºrmek istediƒüiniz AI metnini buraya yapƒ±≈ütƒ±rƒ±n...",
                outputPlaceholder: "D√∂n√º≈üt√ºr√ºlm√º≈ü metin burada g√∂r√ºnecek...",
                langBtn: "EN",
                historyToggle: "üìú Ge√ßmi≈ü",
                historyTitle: "üìú D√∂n√º≈ü√ºm Ge√ßmi≈üi",
                clearHistoryBtn: "Temizle",
                emptyHistory: "Hen√ºz kayƒ±tlƒ± d√∂n√º≈ü√ºm yok"
            },
            en: {
                title: "AI Text Humanizer",
                subtitle: "Transform AI-generated text to sound natural and human-like",
                apiTitle: "üîë API Settings",
                apiPlaceholder: "Enter your Groq API Key (gsk_...)",
                testBtn: "Test Connection",
                apiInfo: "üí° Get Groq API key at: console.groq.com - Free 1M tokens/day",
                inputTokens: "Input Tokens",
                outputTokens: "Output Tokens",
                scoreLabel: "AI Detection Score",
                humanLabel: "Human Similarity",
                styleTitle: "‚ú® Conversion Style",
                naturalTitle: "üìù Natural",
                naturalDesc: "Casual, friendly writing style",
                academicTitle: "üéì Academic",
                academicDesc: "Professional, academic tone",
                creativeTitle: "üé® Creative",
                creativeDesc: "Literary, creative expressions",
                casualTitle: "üí¨ Casual",
                casualDesc: "Friendly, informal tone",
                inputTitle: "AI Text",
                outputTitle: "Humanized Text",
                charLabel: "characters",
                copyBtn: "üìã Copy",
                downloadBtn: "üíæ Download ‚ñº",
                clearBtn: "üóëÔ∏è Clear",
                btnText: "‚ú® Humanize Text",
                feature1Title: "AI Detector Bypass",
                feature1Desc: "Evade GPTZero, Turnitin and other AI detectors. Your text will look 100% human-written.",
                feature2Title: "Instant Conversion",
                feature2Desc: "Transform your text in seconds. No waiting with Groq API's fast infrastructure.",
                feature3Title: "Multilingual",
                feature3Desc: "Turkish and English support. Works in other languages too, but best results in these.",
                feature4Title: "4 Different Styles",
                feature4Desc: "Choose from natural, academic, creative, or casual writing styles.",
                feature5Title: "AI Score",
                feature5Desc: "Real-time AI detection score and human similarity measurement.",
                feature6Title: "Unlimited Usage",
                feature6Desc: "Unlimited usage with your own API key. No restrictions whatsoever.",
                footerText: "AI Text Humanizer &copy; 2025 | Powered by Groq API",
                inputPlaceholder: "Paste the AI text you want to transform here...",
                outputPlaceholder: "Humanized text will appear here...",
                langBtn: "TR",
                historyToggle: "üìú History",
                historyTitle: "üìú Conversion History",
                clearHistoryBtn: "Clear",
                emptyHistory: "No saved conversions yet"
            }
        };

        let currentLang = 'tr';
        let selectedStyle = 'natural';

        // Sayfa y√ºklendiƒüinde
        document.addEventListener('DOMContentLoaded', () => {
            loadSettings();
            createParticles();
            updateStats();
            
            // Event listener'larƒ± ekle
            document.getElementById('apiKey').addEventListener('blur', saveApiKey);
            document.getElementById('modelSelect').addEventListener('change', saveModel);
            document.getElementById('testBtn').addEventListener('click', testConnection);
        });

        // Dil deƒüi≈ütir
        function toggleLanguage() {
            currentLang = currentLang === 'tr' ? 'en' : 'tr';
            updateLanguage();
            localStorage.setItem('language', currentLang);
        }

        // Dili g√ºncelle
        function updateLanguage() {
            const t = translations[currentLang];
            document.getElementById('title').textContent = t.title;
            document.getElementById('subtitle').textContent = t.subtitle;
            document.getElementById('apiTitle').textContent = t.apiTitle;
            document.getElementById('apiKey').placeholder = t.apiPlaceholder;
            document.getElementById('testBtn').textContent = t.testBtn;
            document.getElementById('apiInfo').innerHTML = t.apiInfo + ' | <a href="https://console.groq.com" target="_blank" style="color: #00d2ff;">console.groq.com</a>';
            document.getElementById('inputLabel').textContent = t.inputTokens;
            document.getElementById('outputLabel').textContent = t.outputTokens;
            document.getElementById('scoreLabel').textContent = t.scoreLabel;
            document.getElementById('humanLabel').textContent = t.humanLabel;
            document.getElementById('styleTitle').textContent = t.styleTitle;
            document.getElementById('naturalTitle').textContent = t.naturalTitle;
            document.getElementById('naturalDesc').textContent = t.naturalDesc;
            document.getElementById('academicTitle').textContent = t.academicTitle;
            document.getElementById('academicDesc').textContent = t.academicDesc;
            document.getElementById('creativeTitle').textContent = t.creativeTitle;
            document.getElementById('creativeDesc').textContent = t.creativeDesc;
            document.getElementById('casualTitle').textContent = t.casualTitle;
            document.getElementById('casualDesc').textContent = t.casualDesc;
            document.getElementById('inputTitle').textContent = t.inputTitle;
            document.getElementById('outputTitle').textContent = t.outputTitle;
            document.getElementById('charLabel').textContent = t.charLabel;
            document.getElementById('copyBtn').textContent = t.copyBtn;
            document.getElementById('downloadBtn').textContent = t.downloadBtn;
            document.getElementById('clearBtn').textContent = t.clearBtn;
            document.getElementById('btnText').textContent = t.btnText;
            document.getElementById('feature1Title').textContent = t.feature1Title;
            document.getElementById('feature1Desc').textContent = t.feature1Desc;
            document.getElementById('feature2Title').textContent = t.feature2Title;
            document.getElementById('feature2Desc').textContent = t.feature2Desc;
            document.getElementById('feature3Title').textContent = t.feature3Title;
            document.getElementById('feature3Desc').textContent = t.feature3Desc;
            document.getElementById('feature4Title').textContent = t.feature4Title;
            document.getElementById('feature4Desc').textContent = t.feature4Desc;
            document.getElementById('feature5Title').textContent = t.feature5Title;
            document.getElementById('feature5Desc').textContent = t.feature5Desc;
            document.getElementById('feature6Title').textContent = t.feature6Title;
            document.getElementById('feature6Desc').textContent = t.feature6Desc;
            document.getElementById('footerText').textContent = t.footerText;
            document.getElementById('inputText').placeholder = t.inputPlaceholder;
            document.getElementById('outputText').placeholder = t.outputPlaceholder;
            document.getElementById('langText').textContent = t.langBtn;
            document.getElementById('historyToggleText').textContent = t.historyToggle;
            document.getElementById('historyTitle').textContent = t.historyTitle;
            document.getElementById('clearHistoryBtn').textContent = t.clearHistoryBtn;
            document.getElementById('emptyHistory').textContent = t.emptyHistory;
        }

        // Ayarlarƒ± kaydet
        function saveApiKey() {
            const apiKey = document.getElementById('apiKey').value;
            if (apiKey) {
                localStorage.setItem('groqApiKey', apiKey);
            }
        }

        function saveModel() {
            const model = document.getElementById('modelSelect').value;
            localStorage.setItem('selectedModel', model);
        }

        // Ayarlarƒ± y√ºkle
        function loadSettings() {
            const savedKey = localStorage.getItem('groqApiKey');
            const savedModel = localStorage.getItem('selectedModel');
            const savedLang = localStorage.getItem('language');
            
            if (savedKey) {
                document.getElementById('apiKey').value = savedKey;
            }
            if (savedModel) {
                document.getElementById('modelSelect').value = savedModel;
            }
            if (savedLang) {
                currentLang = savedLang;
                updateLanguage();
            }
        }

        // Stil se√ßimi
        function selectStyle(style) {
            selectedStyle = style;
            document.querySelectorAll('.style-card').forEach(card => {
                card.classList.remove('active');
            });
            document.querySelector(`[data-style="${style}"]`).classList.add('active');
        }

        // ƒ∞statistikleri g√ºncelle
        function updateStats() {
            const text = document.getElementById('inputText').value;
            const charCount = text.length;
            document.getElementById('charCount').textContent = charCount;
            
            // Yakla≈üƒ±k token sayƒ±sƒ± (kelime bazlƒ± tahmin)
            const estimatedTokens = Math.ceil(charCount / 4);
            document.getElementById('inputTokens').textContent = estimatedTokens;
            
            // AI skoru hesapla (basit heuristic)
            const aiScore = calculateAIScore(text);
            document.getElementById('aiScore').textContent = aiScore + '%';
            document.getElementById('scoreFill').style.width = aiScore + '%';
            document.getElementById('humanScore').textContent = (100 - aiScore) + '%';
        }

        // AI skoru hesapla (ger√ßek√ßi)
        function calculateAIScore(text) {
            if (!text) return 0;
            
            let score = 50; // Tarafsƒ±z ba≈ülangƒ±√ß
            
            // AI tipik kalƒ±plarƒ±
            const aiPatterns = [
                /\b(√∂ncelikle|ilk olarak|sonu√ß olarak|sonu√ß itibariyle)\b/gi,
                /\b(bununla birlikte|buna raƒümen|dolayƒ±sƒ±yla|b√∂ylece|bu nedenle)\b/gi,
                /\b(daha spesifik olarak|daha a√ßƒ±k olmak gerekirse|≈üunu belirtmek gerekir)\b/gi,
                /\b(importantly|furthermore|moreover|consequently|therefore|additionally|in conclusion)\b/gi,
                /\b(it is important to note|it should be noted|it is worth noting|it must be emphasized)\b/gi,
                /\b(√∂zellikle|√∂zellikle de|belirgin bir ≈üekilde|a√ßƒ±k√ßa g√∂r√ºld√ºƒü√º √ºzere|g√∂r√ºld√ºƒü√º gibi)\b/gi,
                /\b(√∂zetle|genel olarak|t√ºm bu nedenlerle|sonu√ß itibarƒ±yla)\b/gi,
            ];
            
            aiPatterns.forEach(pattern => {
                const matches = (text.match(pattern) || []).length;
                score += matches * 6;
            });
            
            // ƒ∞nsansƒ± kalƒ±plar (skoru d√º≈ü√ºr)
            const humanPatterns = [
                /\b(bence|sanƒ±rƒ±m|galiba|yani|≈üey|falan|filan|hani|i≈üte)\b/gi,
                /\b(i think|i guess|maybe|like|you know|kind of|sort of|um|uh)\b/gi,
                /[.!?]\s+[a-z√ßƒüƒ±√∂≈ü√º]/g, // K√º√ß√ºk harfle ba≈ülayan c√ºmleler
                /\([^)]{3,40}\)/g, // Parantez i√ßi a√ßƒ±klamalar
                /\.{2,4}/g, // √ú√ß nokta
                /[!]{1,2}/g, // √únlem
                /&/g, // & i≈üareti (g√ºndelik)
                /'cause/gi, // cause kƒ±saltmasƒ±
            ];
            
            humanPatterns.forEach(pattern => {
                const matches = (text.match(pattern) || []).length;
                score -= matches * 5;
            });
            
            // C√ºmle uzunluƒüu deƒüi≈ükenliƒüi (BURSTINESS)
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
            if (sentences.length > 2) {
                const lengths = sentences.map(s => s.trim().split(/\s+/).length); // Kelime sayƒ±sƒ±
                const avgLength = lengths.reduce((a, b) => a + b, 0) / lengths.length;
                const variance = lengths.reduce((sum, len) => sum + Math.pow(len - avgLength, 2), 0) / lengths.length;
                const stdDev = Math.sqrt(variance);
                
                // Y√ºksek standart sapma = y√ºksek burstiness = insansƒ±
                if (stdDev > 5) {
                    score -= 15;
                } else if (stdDev > 3) {
                    score -= 8;
                }
                
                // √áok kƒ±sa c√ºmleler varsa (insan hatasƒ±)
                const shortSentences = lengths.filter(l => l <= 4).length;
                if (shortSentences > 0) {
                    score -= shortSentences * 3;
                }
                
                // √áok uzun c√ºmleler varsa
                const longSentences = lengths.filter(l => l >= 20).length;
                if (longSentences > 0) {
                    score -= longSentences * 2;
                }
            }
            
            return Math.min(95, Math.max(5, score));
        }

        // √áƒ±ktƒ±yƒ± temizle ve insansƒ± hale getir
        function cleanForeignCharacters(text, lang) {
            if (!text) return text;
            
            // √áince karakterleri (CJK Unified Ideographs) - KESƒ∞NLƒ∞KLE YASAK
            text = text.replace(/[\u4e00-\u9fff]+/g, '');
            
            // Japonca karakterleri (Hiragana, Katakana)
            text = text.replace(/[\u3040-\u309f\u30a0-\u30ff]+/g, '');
            
            // Korece karakterleri
            text = text.replace(/[\uac00-\ud7af]+/g, '');
            
            // Arap√ßa karakterleri
            text = text.replace(/[\u0600-\u06ff\u0750-\u077f]+/g, '');
            
            // Rus√ßa/Kiril karakterleri
            text = text.replace(/[\u0400-\u04ff]+/g, '');
            
            // Yunanca karakterleri
            text = text.replace(/[\u0370-\u03ff\u1f00-\u1fff]+/g, '');
            
            // Fazla bo≈üluklarƒ± temizle
            text = text.replace(/\s+/g, ' ').trim();
            
            return text;
        }

        // AI dedekt√∂rlerini atlatmak i√ßin AGRESƒ∞F insansƒ± dokunu≈ülar
        function addHumanTouch(text, lang) {
            if (!text) return text;
            
            // C√ºmleleri ayƒ±r - AMA bozuk c√ºmleleri de yakala
            let rawSentences = text.split(/(?<=[.!?])\s+/);
            let sentences = [];
            
            // Bazƒ± c√ºmleleri birle≈ütir, bazƒ±larƒ±nƒ± b√∂l (ger√ßek burstiness)
            for (let i = 0; i < rawSentences.length; i++) {
                if (Math.random() < 0.15 && i < rawSentences.length - 1) {
                    // ƒ∞ki c√ºmleyi birle≈ütir (insan bazen nokta koymayƒ± unutur)
                    sentences.push(rawSentences[i] + ' ' + rawSentences[i + 1]);
                    i++;
                } else if (Math.random() < 0.1 && rawSentences[i].length > 50) {
                    // Uzun c√ºmleyi ortadan b√∂l
                    const mid = Math.floor(rawSentences[i].length / 2);
                    const splitIdx = rawSentences[i].indexOf(' ', mid);
                    if (splitIdx > 0) {
                        sentences.push(rawSentences[i].substring(0, splitIdx));
                        sentences.push(rawSentences[i].substring(splitIdx + 1));
                    } else {
                        sentences.push(rawSentences[i]);
                    }
                } else {
                    sentences.push(rawSentences[i]);
                }
            }
            
            if (lang === 'tr') {
                sentences = sentences.map((s, i) => {
                    s = s.trim();
                    if (!s) return s;
                    
                    // %35 ihtimalle c√ºmle ba≈üƒ±nƒ± k√º√ß√ºk harf yap
                    if (Math.random() < 0.35 && i > 0) {
                        s = s.charAt(0).toLowerCase() + s.slice(1);
                    }
                    
                    // %25 ihtimalle fazla noktalama ekle
                    if (Math.random() < 0.25 && s.match(/[.!?]$/)) {
                        s = s.replace(/([.!?])$/, '$1$1');
                    }
                    
                    // %20 ihtimalle c√ºmle sonundan noktayƒ± kaldƒ±r
                    if (Math.random() < 0.2 && i < sentences.length - 1) {
                        s = s.replace(/[.!?]$/, '');
                    }
                    
                    // %40 ihtimalle 've' yerine '&' kullan
                    if (Math.random() < 0.4) {
                        s = s.replace(/\bve\b/g, '&');
                    }
                    
                    // %30 ihtimalle '√ß√ºnk√º' yerine ''cause' kullan
                    if (Math.random() < 0.3) {
                        s = s.replace(/\b√ß√ºnk√º\b/gi, "'cause");
                    }
                    
                    // %15 ihtimalle c√ºmle sonuna d√º≈ü√ºnce takƒ±lmasƒ± ekle
                    if (Math.random() < 0.15 && i > 0 && i < sentences.length - 1) {
                        s = s + '... yani';
                    }
                    
                    return s;
                });
                
                // C√ºmleleri birle≈ütir - TUTARSIZ bo≈üluklar bƒ±rak
                text = sentences.join(' ');
                
                // %20 ihtimalle noktadan √∂nce bo≈üluk bƒ±rak (insan hatasƒ±)
                if (Math.random() < 0.2) {
                    text = text.replace(/([a-z])\.([A-Z])/g, '$1 . $2');
                }
                
            } else {
                // ƒ∞ngilizce i√ßin - DAHA AGRESƒ∞F
                sentences = sentences.map((s, i) => {
                    s = s.trim();
                    if (!s) return s;
                    
                    // %35 ihtimalle c√ºmle ba≈üƒ±nƒ± k√º√ß√ºk harf yap
                    if (Math.random() < 0.35 && i > 0) {
                        s = s.charAt(0).toLowerCase() + s.slice(1);
                    }
                    
                    // %25 ihtimalle fazla noktalama
                    if (Math.random() < 0.25 && s.match(/[.!?]$/)) {
                        s = s.replace(/([.!?])$/, '$1$1');
                    }
                    
                    // %20 ihtimalle noktayƒ± kaldƒ±r
                    if (Math.random() < 0.2 && i < sentences.length - 1) {
                        s = s.replace(/[.!?]$/, '');
                    }
                    
                    // %45 ihtimalle 'and' yerine '&' kullan
                    if (Math.random() < 0.45) {
                        s = s.replace(/\band\b/g, '&');
                    }
                    
                    // %35 ihtimalle 'because' yerine ''cause' kullan
                    if (Math.random() < 0.35) {
                        s = s.replace(/\bbecause\b/gi, "'cause");
                    }
                    
                    // %30 ihtimalle 'with' yerine 'w/' kullan
                    if (Math.random() < 0.3) {
                        s = s.replace(/\bwith\b/g, 'w/');
                    }
                    
                    // %15 ihtimalle d√º≈ü√ºnce deƒüi≈üimi
                    if (Math.random() < 0.15 && i > 0 && i < sentences.length - 1) {
                        s = s + '... like';
                    }
                    
                    return s;
                });
                
                text = sentences.join(' ');
                
                // %20 ihtimalle noktadan √∂nce bo≈üluk
                if (Math.random() < 0.2) {
                    text = text.replace(/([a-z])\.([A-Z])/g, '$1 . $2');
                }
            }
            
            // Genel temizlik - ama bazƒ± hatalarƒ± koru
            text = text.replace(/\s{2,}/g, ' ');
            
            // Tekrarlanan kelimeleri AZ KULLANILAN e≈ü anlamlƒ±larla deƒüi≈ütir
            if (lang === 'tr') {
                const wordReplacements = {
                    '√ßok': ['olduk√ßa', 'epey', 'bayaƒüƒ±', 'fazlasƒ±yla', 'pekiyi'],
                    'g√ºzel': ['ho≈ü', 'harika', 'm√ºkemmel', 's√ºper', 'fevkalade'],
                    'b√ºy√ºk': ['kocaman', 'devasa', 'iri', 'geni≈ü', 'muazzam'],
                    'k√º√ß√ºk': ['minik', 'ufak', 'minnacƒ±k', 'daracƒ±k'],
                    'iyi': ['m√ºkemmel', 'harika', 'g√ºzel', 'fena deƒüil', 'pekiyi'],
                    'k√∂t√º': ['berbat', 'fena', 'iƒüren√ß', 'korkun√ß', 'rezil'],
                    'yeni': ['taze', 'son √ßƒ±kan', 'modern', 'g√ºncel', 'son model'],
                    'eski': ['kadim', 'k√∂hne', 'eskimi≈ü', 'ge√ßmi≈üten', 'antika'],
                    'hƒ±zlƒ±': ['√ßabuk', 's√ºratli', 'hƒ±zlƒ±ca', 'hƒ±z kesmeden', '≈üim≈üek gibi'],
                    'yava≈ü': ['aƒüƒ±r', 'yava≈ü√ßa', 'temkinli', 'sakin', 'aheste'],
                    'artƒ±rmak': ['per√ßinlemek', 'y√ºkseltmek', '√ßoƒüaltmak', 'katbekat artƒ±rmak'],
                    'ba≈üarmak': ['muvaffak olmak', '√ºstesinden gelmek', 'becermek', 'ba≈üarƒ±ya ula≈ümak'],
                    '√∂nemli': ['m√ºhim', 'ehemmiyetli', 'kƒ±ymetli', 'hayati'],
                    'yapmak': ['ger√ßekle≈ütirmek', 'yapƒ±vermek', 'yapƒ±vermek', 'if√¢ etmek'],
                    's√∂ylemek': ['belirtmek', 'ifade etmek', 'dile getirmek', 's√∂yleyivermek'],
                    'geli≈ütirmek': ['iyile≈ütirmek', 'daha ileri g√∂t√ºrmek', 'per√ßinlemek', 'geli≈ütirmek']
                };
                
                Object.keys(wordReplacements).forEach(word => {
                    const regex = new RegExp(`\\b${word}\\b`, 'gi');
                    let count = 0;
                    text = text.replace(regex, (match) => {
                        count++;
                        if (count > 0) { // ƒ∞lk kullanƒ±mdan itibaren deƒüi≈ütir
                            const replacements = wordReplacements[word];
                            return replacements[Math.floor(Math.random() * replacements.length)];
                        }
                        return match;
                    });
                });
                
                // ƒ∞nsani dolgular ekle (c√ºmle ba≈ülarƒ±na)
                const fillers = [
                    'D√ºr√ºst olmak gerekirse, ',
                    '≈ûunu da belirtmek lazƒ±m ki ',
                    'Bir bakƒ±ma ',
                    'Aslƒ±nda bakarsan ',
                    '≈û√∂yle s√∂yleyeyim, ',
                    'Hani ≈üey, ',
                    '≈ûahsen, ',
                    'Bence, ',
                    'Yani, ',
                    'A√ßƒ±k√ßasƒ±, '
                ];
                
                // %40 ihtimalle c√ºmle ba≈üƒ±na dolgu ekle
                const sentences = text.split(/([.!?]+\s*)/);
                text = sentences.map((s, i) => {
                    if (i % 2 === 0 && s.trim() && Math.random() < 0.4) {
                        const filler = fillers[Math.floor(Math.random() * fillers.length)];
                        // C√ºmlenin ilk harfini k√º√ß√ºk yap (dolgu varsa)
                        s = s.charAt(0).toLowerCase() + s.slice(1);
                        return filler + s;
                    }
                    return s;
                }).join('');
                
            } else {
                const wordReplacements = {
                    'very': ['really', 'quite', 'pretty', 'super', 'extremely'],
                    'good': ['great', 'awesome', 'excellent', 'nice', 'solid'],
                    'big': ['huge', 'massive', 'large', 'giant', 'substantial'],
                    'small': ['tiny', 'little', 'mini', 'compact', 'petite'],
                    'bad': ['terrible', 'awful', 'horrible', 'crappy', 'lousy'],
                    'new': ['fresh', 'latest', 'modern', 'recent', 'brand-new'],
                    'old': ['ancient', 'aged', 'vintage', 'old-school', 'time-worn'],
                    'fast': ['quick', 'rapid', 'speedy', 'swift', 'lightning-fast'],
                    'slow': ['sluggish', 'gradual', 'steady', 'gentle', 'unhurried'],
                    'important': ['crucial', 'vital', 'essential', 'key', 'critical'],
                    'think': ['believe', 'feel', 'suppose', 'guess', 'reckon'],
                    'said': ['mentioned', 'noted', 'pointed out', 'commented', 'remarked'],
                    'many': ['lots of', 'tons of', 'plenty of', 'loads of', 'a bunch of'],
                    'also': ['plus', 'as well', 'too', 'additionally', 'furthermore'],
                    'improve': ['enhance', 'perch', 'boost', 'elevate', 'refine'],
                    'make': ['create', 'craft', 'produce', 'generate', 'whip up'],
                    'get': ['obtain', 'acquire', 'grab', 'snag', 'pick up']
                };
                
                Object.keys(wordReplacements).forEach(word => {
                    const regex = new RegExp(`\\b${word}\\b`, 'gi');
                    let count = 0;
                    text = text.replace(regex, (match) => {
                        count++;
                        if (count > 0) {
                            const replacements = wordReplacements[word];
                            return replacements[Math.floor(Math.random() * replacements.length)];
                        }
                        return match;
                    });
                });
                
                // ƒ∞nsani dolgular ekle
                const fillers = [
                    "Honestly speaking, ",
                    "Let me tell you, ",
                    "Sort of ",
                    "In a way, ",
                    "To be real with you, ",
                    "You know what, ",
                    "Personally, I think ",
                    "I mean, ",
                    "Like, ",
                    "Actually, "
                ];
                
                const sentences = text.split(/([.!?]+\s*)/);
                text = sentences.map((s, i) => {
                    if (i % 2 === 0 && s.trim() && Math.random() < 0.4) {
                        const filler = fillers[Math.floor(Math.random() * fillers.length)];
                        s = s.charAt(0).toLowerCase() + s.slice(1);
                        return filler + s;
                    }
                    return s;
                }).join('');
            }
            
            return text.trim();
        }

        // Baƒülantƒ± test et
        async function testConnection() {
            const apiKey = document.getElementById('apiKey').value;
            if (!apiKey) {
                showToast(currentLang === 'tr' ? 'L√ºtfen API key girin!' : 'Please enter API key!', true);
                return;
            }

            try {
                const response = await fetch('https://api.groq.com/openai/v1/models', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok) {
                    showToast(currentLang === 'tr' ? '‚úÖ Baƒülantƒ± ba≈üarƒ±lƒ±!' : '‚úÖ Connection successful!');
                    saveApiKey();
                } else {
                    showToast(currentLang === 'tr' ? '‚ùå API key ge√ßersiz!' : '‚ùå Invalid API key!', true);
                }
            } catch (error) {
                showToast(currentLang === 'tr' ? '‚ùå Baƒülantƒ± hatasƒ±!' : '‚ùå Connection error!', true);
            }
        }

        // Metni humanize et
        async function humanizeText() {
            const apiKey = document.getElementById('apiKey').value;
            const inputText = document.getElementById('inputText').value;
            const model = document.getElementById('modelSelect').value;
            const btn = document.getElementById('humanizeBtn');
            
            if (!apiKey) {
                showToast(currentLang === 'tr' ? 'L√ºtfen API key girin!' : 'Please enter API key!', true);
                document.getElementById('apiKey').focus();
                return;
            }

            if (!inputText.trim()) {
                showToast(currentLang === 'tr' ? 'L√ºtfen metin girin!' : 'Please enter text!', true);
                return;
            }

            btn.disabled = true;
            btn.classList.add('loading');
            
            const stylePrompts = {
                tr: {
                    natural: "Metni BA≈ûTAN YAZ. TAHMƒ∞N EDƒ∞LEBƒ∞RLƒ∞ƒûƒ∞ BOZ. ≈ûunlarƒ± yap: 1) C√ºmle uzunluklarƒ±nƒ± EXTREME deƒüi≈ütir (3 kelimelik ile 30 kelimelik c√ºmleleri RASTGELE karƒ±≈ütƒ±r) 2) BAZI c√ºmleleri K√ú√á√úK HARFLE ba≈ülat 3) Noktalama kullanƒ±mƒ±nƒ± TUTARSIZ yap (bazen .. bazen ! bazen hi√ß) 4) 'Ve, ama, √ß√ºnk√º, ki' ile c√ºmle BA≈ûLAT 5) KONU≈ûMA Dƒ∞Lƒ∞NDE yaz, kitabi dil kullanma 6) ARADA parantez (≈ü√∂yle d√º≈ü√ºn√ºyorum) a√ßƒ±klamalarƒ± ekle 7) 'Ba≈üarƒ±yƒ± artƒ±rmak' yerine 'ba≈üarƒ±yƒ± per√ßinlemek' gibi AZ KULLANILAN e≈ü anlamlƒ±lar kullan 8) 'D√ºr√ºst olmak gerekirse', '≈ûunu da belirtmek lazƒ±m', 'Bir bakƒ±ma' gibi ƒ∞NSANƒ∞ DOLGULAR serpi≈ütir 9) Hedef: KUSURLU ama SAMƒ∞Mƒ∞ yazƒ±m. Metni:",
                    academic: "Metni akademik ama ƒ∞NSANSIZCA yaz. TAHMƒ∞N EDƒ∞LEBƒ∞RLƒ∞ƒûƒ∞ BOZ: 1) √áok kƒ±sa c√ºmleleri √ßok uzun c√ºmlelerle RASTGELE karƒ±≈ütƒ±r 2) Bazen c√ºmle ortasƒ±nda d√º≈ü√ºnce deƒüi≈ütir (takƒ±lma taklidi yap) 3) Noktalamayƒ± TUTARSIZ kullan 4) A≈üƒ±rƒ± formel baƒüla√ßlardan (√∂ncelikle, sonu√ß olarak) KA√áIN 5) Ki≈üisel yorumlar ekle: 'Bence', '≈ûahsen', 'D√ºr√ºst olmak gerekirse' 6) Az kullanƒ±lan akademik kelimeler kullan. Metni:",
                    creative: "Metni YARATICI ve KAOTƒ∞K yaz. TAHMƒ∞N EDƒ∞LEBƒ∞RLƒ∞ƒûƒ∞ YOK ET: 1) 2-3 kelimelik KISA c√ºmleler kullan 2) Hemen ardƒ±ndan 30+ kelimelik DEVASA c√ºmleler koy 3) Metaforlar kullan 4) Duygusal ton deƒüi≈üimleri yap 5) 'Bir bakƒ±ma', 'Aslƒ±nda bakarsan', '≈û√∂yle s√∂yleyeyim' gibi dolgular ekle 6) Tutarsƒ±z noktalama kullan (!.. vs) 7) Parantez i√ßi d√º≈ü√ºnceler ekle. Metni:",
                    casual: "Metni SANKƒ∞ HIZLI YAZIYORMU≈ûSUN gibi d√ºzenle. KUSURLU AMA SAMƒ∞Mƒ∞ olsun: 1) √áok kƒ±sa c√ºmleler (2-4 kelime) - bazen tek kelime! 2) Bazen c√ºmle sonu nokta KOYMA 3) 'Bence', 'Galiba', 'Yani', '≈ûey' kullan 4) 'Ve' ile her ≈üeyi baƒüla 5) Parantez i√ßi (ani d√º≈ü√ºnce) ekle 6) 'D√ºr√ºst olmak gerekirse' gibi samimi dolgular kullan 7) Argoya ka√ßmayan ama g√ºndelik ifadeler. Metni:"
                },
                en: {
                    natural: "Rewrite from scratch. BREAK PREDICTABILITY: 1) Mix VERY SHORT (3 words) with VERY LONG (30 words) sentences RANDOMLY 2) Start SOME sentences LOWERCASE 3) Inconsistent punctuation (.. ! ? or none) 4) Start with 'And, but, because' 5) Write in SPEECH style 6) Add parenthetical thoughts (like this) 7) Use RARE synonyms: 'improve' to 'perch' 8) Add FILLERS: 'Honestly', 'Let me tell you', 'Sort of' 9) Target: FLAWED but AUTHENTIC. Text:",
                    academic: "Rewrite academically but HUMAN-LIKE. BREAK PREDICTABILITY: 1) Randomly mix short with very long sentences 2) Change thought mid-sentence (pretend to stumble) 3) Inconsistent punctuation 4) AVOID formal connectors 5) Add personal comments: 'I think', 'Personally', 'To be honest' 6) Use less common academic words. Text:",
                    creative: "Rewrite CHAOTICALLY. DESTROY PREDICTABILITY: 1) Use 2-3 word SHORT sentences 2) Immediately follow with 30+ word LONG sentences 3) Use metaphors 4) Emotional shifts 5) Add fillers: 'In a way', 'Actually', 'Let me put it this way' 6) Inconsistent punctuation (!..) 7) Parenthetical asides. Text:",
                    casual: "Rewrite like RUSHING. Make it FLAWED but AUTHENTIC: 1) Very short sentences (2-4 words) - sometimes ONE word! 2) Sometimes skip punctuation 3) Use 'I think', 'Maybe', 'Like', 'You know' 4) Connect with 'and' 5) Add (sudden thoughts) 6) Use fillers: 'Honestly speaking', 'Let me be real' 7) Casual but not slang. Text:"
                }
            };

            const systemPrompt = currentLang === 'tr' 
                ? "KURAL: TAHMƒ∞N EDƒ∞LEBƒ∞RLƒ∞ƒûƒ∞ BOZ! 1) C√ºmle uzunluƒüu 3-30 kelime arasƒ± RASTGELE deƒüi≈üsin 2) Bazƒ± c√ºmleler K√ú√á√úK harfle ba≈ülasƒ±n 3) Noktalama TUTARSIZ olsun 4) 'Ve, ama, √ß√ºnk√º' ile BA≈ûLA 5) 'D√ºr√ºst olmak gerekirse', '≈ûunu da belirtmek lazƒ±m' gibi DOLGULAR kullan 6) Az kullanƒ±lan KELƒ∞MELER tercih et 7) ANLAMI koru ama M√úKEMMELƒ∞YETƒ∞ boz - KUSURLU olsun!"
                : "RULE: BREAK PREDICTABILITY! 1) Random sentence length 3-30 words 2) Some sentences LOWERCASE start 3) Inconsistent punctuation 4) Start with 'And, but, because' 5) Use fillers: 'Honestly', 'Let me tell you' 6) Prefer RARE words 7) PRESERVE meaning but DESTROY PERFECTION - make it FLAWED!";

            try {
                const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: model,
                        messages: [
                            {
                                role: "system",
                                content: systemPrompt
                            },
                            {
                                role: "user",
                                content: stylePrompts[currentLang][selectedStyle] + "\n\n" + inputText
                            }
                        ],
                        temperature: 1.2,
                        max_tokens: 4000,
                        top_p: 0.95
                    })
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.error?.message || 'API error');
                }

                const data = await response.json();
                let humanizedText = data.choices[0].message.content;
                
                // √áince ve diƒüer yabancƒ± karakterleri temizle
                humanizedText = cleanForeignCharacters(humanizedText, currentLang);
                
                // AI dedekt√∂rlerini atlatmak i√ßin insansƒ± dokunu≈ülar
                humanizedText = addHumanTouch(humanizedText, currentLang);
                
                document.getElementById('outputText').value = humanizedText;
                
                // √áƒ±ktƒ± token sayƒ±sƒ±nƒ± g√ºncelle
                const outputTokens = data.usage?.completion_tokens || Math.ceil(humanizedText.length / 4);
                document.getElementById('outputTokens').textContent = outputTokens;
                
                // Yeni AI skorunu hesapla
                const newAIScore = calculateAIScore(humanizedText);
                document.getElementById('aiScore').textContent = newAIScore + '%';
                document.getElementById('scoreFill').style.width = newAIScore + '%';
                document.getElementById('humanScore').textContent = (100 - newAIScore) + '%';
                
                showToast(currentLang === 'tr' ? '‚úÖ Metin ba≈üarƒ±yla d√∂n√º≈üt√ºr√ºld√º!' : '‚úÖ Text successfully humanized!');
                
                // Ge√ßmi≈üe kaydet
                saveToHistory(inputText, humanizedText, selectedStyle);
                
            } catch (error) {
                showToast(currentLang === 'tr' ? '‚ùå Hata: ' + error.message : '‚ùå Error: ' + error.message, true);
            } finally {
                btn.disabled = false;
                btn.classList.remove('loading');
            }
        }

        // √áƒ±ktƒ±yƒ± kopyala
        function copyOutput() {
            const outputText = document.getElementById('outputText');
            if (!outputText.value) {
                showToast(currentLang === 'tr' ? 'Kopyalanacak metin yok!' : 'No text to copy!', true);
                return;
            }
            
            outputText.select();
            document.execCommand('copy');
            window.getSelection().removeAllRanges();
            
            showToast(currentLang === 'tr' ? '‚úÖ Metin kopyalandƒ±!' : '‚úÖ Text copied!');
        }

        // Download men√ºs√ºn√º a√ß/kapat
        function toggleDownloadMenu() {
            const menu = document.getElementById('downloadMenu');
            menu.classList.toggle('show');
        }

        // Men√º dƒ±≈üƒ±na tƒ±klandƒ±ƒüƒ±nda kapat
        document.addEventListener('click', function(e) {
            const dropdown = document.querySelector('.download-dropdown');
            if (!dropdown.contains(e.target)) {
                document.getElementById('downloadMenu').classList.remove('show');
            }
        });

        // TXT olarak indir
        function downloadAsTXT() {
            const outputText = document.getElementById('outputText').value;
            if (!outputText) {
                showToast(currentLang === 'tr' ? 'ƒ∞ndirilecek metin yok!' : 'No text to download!', true);
                return;
            }
            
            const blob = new Blob([outputText], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `humanized-${new Date().toISOString().slice(0,10)}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            document.getElementById('downloadMenu').classList.remove('show');
            showToast(currentLang === 'tr' ? '‚úÖ TXT indirildi!' : '‚úÖ TXT downloaded!');
        }

        // Markdown olarak indir
        function downloadAsMD() {
            const outputText = document.getElementById('outputText').value;
            if (!outputText) {
                showToast(currentLang === 'tr' ? 'ƒ∞ndirilecek metin yok!' : 'No text to download!', true);
                return;
            }
            
            const date = new Date().toLocaleString(currentLang === 'tr' ? 'tr-TR' : 'en-US');
            const mdContent = `# ${currentLang === 'tr' ? 'ƒ∞nsanla≈ütƒ±rƒ±lmƒ±≈ü Metin' : 'Humanized Text'}

${currentLang === 'tr' ? '**Olu≈üturulma Tarihi:**' : '**Created Date:**'} ${date}
${currentLang === 'tr' ? '**Stil:**' : '**Style:**'} ${selectedStyle}

---

${outputText}

---

*${currentLang === 'tr' ? 'AI Metin ƒ∞nsanla≈ütƒ±rƒ±cƒ± ile olu≈üturulmu≈ütur' : 'Generated with AI Text Humanizer'}*`;
            
            const blob = new Blob([mdContent], { type: 'text/markdown;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `humanized-${new Date().toISOString().slice(0,10)}.md`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            document.getElementById('downloadMenu').classList.remove('show');
            showToast(currentLang === 'tr' ? '‚úÖ Markdown indirildi!' : '‚úÖ Markdown downloaded!');
        }

        // PDF olarak indir
        function downloadAsPDF() {
            const outputText = document.getElementById('outputText').value;
            if (!outputText) {
                showToast(currentLang === 'tr' ? 'ƒ∞ndirilecek metin yok!' : 'No text to download!', true);
                return;
            }
            
            try {
                // T√ºrk√ße karakterleri ASCII'ye √ßevir
                const turkishToAscii = {
                    'ƒ±': 'i', 'ƒü': 'g', '√º': 'u', '≈ü': 's', '√∂': 'o', '√ß': 'c',
                    'ƒ∞': 'I', 'ƒû': 'G', '√ú': 'U', '≈û': 'S', '√ñ': 'O', '√á': 'C'
                };
                
                function convertTurkish(text) {
                    return text.split('').map(char => turkishToAscii[char] || char).join('');
                }
                
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Helvetica font kullan (T√ºrk√ße karakterleri ASCII'ye √ßevirerek)
                doc.setFont("helvetica");
                
                doc.setFontSize(16);
                const title = convertTurkish(currentLang === 'tr' ? 'ƒ∞nsanla≈ütƒ±rƒ±lmƒ±≈ü Metin' : 'Humanized Text');
                doc.text(title, 20, 20);
                
                doc.setFontSize(10);
                const date = new Date().toLocaleString(currentLang === 'tr' ? 'en-US' : 'en-US');
                doc.text(convertTurkish(`${currentLang === 'tr' ? 'Tarih:' : 'Date:'} ${date}`), 20, 30);
                doc.text(convertTurkish(`${currentLang === 'tr' ? 'Stil:' : 'Style:'} ${selectedStyle}`), 20, 37);
                
                doc.setFontSize(11);
                const convertedText = convertTurkish(outputText);
                const splitText = doc.splitTextToSize(convertedText, 170);
                
                let yPosition = 50;
                const pageHeight = doc.internal.pageSize.height;
                
                splitText.forEach((line, index) => {
                    if (yPosition > pageHeight - 20) {
                        doc.addPage();
                        yPosition = 20;
                    }
                    doc.text(line, 20, yPosition);
                    yPosition += 7;
                });
                
                doc.save(`humanized-${new Date().toISOString().slice(0,10)}.pdf`);
                document.getElementById('downloadMenu').classList.remove('show');
                showToast(currentLang === 'tr' ? '‚úÖ PDF indirildi!' : '‚úÖ PDF downloaded!');
            } catch (error) {
                console.error('PDF Error:', error);
                showToast(currentLang === 'tr' ? '‚ùå PDF olu≈üturulurken hata: ' + error.message : '‚ùå Error creating PDF: ' + error.message, true);
            }
        }

        // DOCX olarak indir
        async function downloadAsDOCX() {
            const outputText = document.getElementById('outputText').value;
            if (!outputText) {
                showToast(currentLang === 'tr' ? 'ƒ∞ndirilecek metin yok!' : 'No text to download!', true);
                return;
            }
            
            try {
                // docx k√ºt√ºphanesinin y√ºklenip y√ºklenmediƒüini kontrol et
                if (typeof window.docx === 'undefined') {
                    throw new Error('DOCX library not loaded');
                }
                
                const docx = window.docx;
                const doc = new docx.Document({
                    sections: [{
                        properties: {},
                        children: [
                            new docx.Paragraph({
                                text: currentLang === 'tr' ? 'ƒ∞nsanla≈ütƒ±rƒ±lmƒ±≈ü Metin' : 'Humanized Text',
                                heading: docx.HeadingLevel.TITLE,
                                alignment: docx.AlignmentType.CENTER
                            }),
                            new docx.Paragraph({
                                children: [
                                    new docx.TextRun({
                                        text: `${currentLang === 'tr' ? 'Tarih:' : 'Date:'} ${new Date().toLocaleString()}`,
                                        italics: true
                                    })
                                ]
                            }),
                            new docx.Paragraph({
                                children: [
                                    new docx.TextRun({
                                        text: `${currentLang === 'tr' ? 'Stil:' : 'Style:'} ${selectedStyle}`,
                                        italics: true
                                    })
                                ]
                            }),
                            new docx.Paragraph({
                                text: '',
                                spacing: { after: 200 }
                            }),
                            ...outputText.split('\n').filter(line => line.trim()).map(line => 
                                new docx.Paragraph({
                                    children: [new docx.TextRun({ text: line })],
                                    spacing: { after: 120 }
                                })
                            ),
                            new docx.Paragraph({
                                text: '',
                                spacing: { after: 400 }
                            }),
                            new docx.Paragraph({
                                children: [
                                    new docx.TextRun({
                                        text: currentLang === 'tr' ? 'AI Metin ƒ∞nsanla≈ütƒ±rƒ±cƒ± ile olu≈üturulmu≈ütur' : 'Generated with AI Text Humanizer',
                                        italics: true,
                                        size: 18
                                    })
                                ],
                                alignment: docx.AlignmentType.CENTER
                            })
                        ]
                    }]
                });
                
                const blob = await docx.Packer.toBlob(doc);
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `humanized-${new Date().toISOString().slice(0,10)}.docx`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                document.getElementById('downloadMenu').classList.remove('show');
                showToast(currentLang === 'tr' ? '‚úÖ DOCX indirildi!' : '‚úÖ DOCX downloaded!');
            } catch (error) {
                console.error('DOCX Error:', error);
                showToast(currentLang === 'tr' ? '‚ùå DOCX olu≈üturulurken hata: ' + error.message : '‚ùå Error creating DOCX: ' + error.message, true);
            }
        }

        // Ge√ßmi≈ü panelini a√ß/kapat
        function toggleHistoryPanel() {
            const panel = document.getElementById('historyPanel');
            const toggle = document.getElementById('historyToggle');
            panel.classList.toggle('open');
            toggle.classList.toggle('open');
            
            if (panel.classList.contains('open')) {
                loadHistory();
            }
        }

        // Ge√ßmi≈üe kaydet
        function saveToHistory(input, output, style) {
            const history = JSON.parse(localStorage.getItem('conversionHistory') || '[]');
            const styleNames = {
                natural: currentLang === 'tr' ? 'Doƒüal' : 'Natural',
                academic: currentLang === 'tr' ? 'Akademik' : 'Academic',
                creative: currentLang === 'tr' ? 'Yaratƒ±cƒ±' : 'Creative',
                casual: currentLang === 'tr' ? 'Rahat' : 'Casual'
            };
            
            const newItem = {
                id: Date.now(),
                date: new Date().toISOString(),
                input: input.substring(0, 100) + (input.length > 100 ? '...' : ''),
                fullInput: input,
                output: output,
                style: styleNames[style] || style,
                styleKey: style
            };
            
            history.unshift(newItem);
            
            // Sadece son 15 kaydƒ± tut
            if (history.length > 15) {
                history.pop();
            }
            
            localStorage.setItem('conversionHistory', JSON.stringify(history));
            
            // Eƒüer panel a√ßƒ±ksa, listeyi g√ºncelle
            if (document.getElementById('historyPanel').classList.contains('open')) {
                loadHistory();
            }
        }

        // Ge√ßmi≈üi y√ºkle ve g√∂ster
        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('conversionHistory') || '[]');
            const listContainer = document.getElementById('historyList');
            
            if (history.length === 0) {
                listContainer.innerHTML = `<div class="empty-history">${currentLang === 'tr' ? 'Hen√ºz kayƒ±tlƒ± d√∂n√º≈ü√ºm yok' : 'No saved conversions yet'}</div>`;
                return;
            }
            
            listContainer.innerHTML = history.map(item => {
                const date = new Date(item.date);
                const dateStr = date.toLocaleString(currentLang === 'tr' ? 'tr-TR' : 'en-US', {
                    day: '2-digit',
                    month: 'short',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                return `
                    <div class="history-item" onclick="restoreHistory(${item.id})">
                        <div class="history-date">${dateStr}</div>
                        <div class="history-style">${item.style}</div>
                        <div class="history-preview">${item.input}</div>
                    </div>
                `;
            }).join('');
        }

        // Ge√ßmi≈üten geri y√ºkle
        function restoreHistory(id) {
            const history = JSON.parse(localStorage.getItem('conversionHistory') || '[]');
            const item = history.find(h => h.id === id);
            
            if (item) {
                document.getElementById('inputText').value = item.fullInput;
                document.getElementById('outputText').value = item.output;
                
                // Stili de geri y√ºkle
                if (item.styleKey) {
                    selectStyle(item.styleKey);
                }
                
                updateStats();
                toggleHistoryPanel(); // Paneli kapat
                showToast(currentLang === 'tr' ? '‚úÖ Ge√ßmi≈üten y√ºklendi!' : '‚úÖ Loaded from history!');
            }
        }

        // Ge√ßmi≈üi temizle
        function clearHistory() {
            if (confirm(currentLang === 'tr' ? 'T√ºm ge√ßmi≈üi silmek istediƒüinize emin misiniz?' : 'Are you sure you want to clear all history?')) {
                localStorage.removeItem('conversionHistory');
                loadHistory();
                showToast(currentLang === 'tr' ? 'üóëÔ∏è Ge√ßmi≈ü temizlendi!' : 'üóëÔ∏è History cleared!');
            }
        }

        // Temizle
        function clearAll() {
            document.getElementById('inputText').value = '';
            document.getElementById('outputText').value = '';
            updateStats();
            showToast(currentLang === 'tr' ? 'üóëÔ∏è Temizlendi!' : 'üóëÔ∏è Cleared!');
        }

        // Toast bildirim g√∂ster
        function showToast(message, isError = false) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast show' + (isError ? ' error-toast' : '');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Par√ßacƒ±k animasyonu
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particle.style.animationDelay = Math.random() * 10 + 's';
                container.appendChild(particle);
            }
        }
    </script>
</body>
</html>